!function(e,a,r){e.fn.paging=function(t,n){var c=this,l={setOptions:function(t){return l.a=e.extend(l.a||{lapping:0,perpage:10,page:1,refresh:{interval:10,url:null},format:"",lock:!1,circular:!1,onClick:null,onFormat:function(){},onSelect:function(){return!0},onRefresh:function(){}},t||{}),l.a.lapping|=0,l.a.perpage|=0,null!==l.a.page&&(l.a.page|=0),1>l.a.perpage&&(l.a.perpage=10),l.interval&&a.clearInterval(l.interval),l.a.refresh.url&&(l.interval=a.setInterval(function(){e.ajax({url:l.a.refresh.url,success:function(a){if("string"==typeof a)try{a=e.parseJSON(a)}catch(r){return}l.a.onRefresh(a)}})},1e3*l.a.refresh.interval)),l.format=function(e){for(var a,t=0,n=0,c=1,l={g:[],i:0,h:0,b:5,current:3,l:0,m:0},i=/[*<>pq\[\]().-]|[nc]+!?/g,p={"[":"first","]":"last","<":"prev",">":"next",q:"left",p:"right","-":"fill",".":"leap"},u={};a=i.exec(e);)a=""+a,r===p[a]?"("===a?n=++t:")"===a?n=0:c&&("*"===a?(l.i=1,l.h=0):(l.i=0,l.h="!"===a.charAt(a.length-1),l.b=a.length-l.h,(l.current=1+a.indexOf("c"))||(l.current=1+l.b>>1)),l.g.push({f:"block",j:0,c:0}),c=0):(l.g.push({f:p[a],j:n,c:r===u[a]?u[a]=1:++u[a]}),"q"===a?++l.m:"p"===a&&++l.l);return l}(l.a.format),l},setNumber:function(e){return l.s=r===e||0>e?-1:e,l},setPage:function(t){function n(e,a,r){r=""+e.onFormat.call(a,r),s=a.value?s+r.replace(/<a/i,'<a data-page="'+a.value+'"'):s+r}if(l.a.lock)return l.a.onSelect(0,c),l;if(r===t){if(t=l.a.page,null===t)return l}else if(l.a.page==t)return l;l.a.page=t|=0;var i,p,u,s,f,o,g,h,v=l.s,b=l.a,m=1,k=l.format,x=k.g.length,M=x;for(b.perpage<=b.lapping&&(b.lapping=b.perpage-1),h=v<=b.lapping?0:0|b.lapping,0>v?(u=v=-1,i=Math.max(1,t-k.current+1-h),p=i+k.b):(u=1+Math.ceil((v-b.perpage)/(b.perpage-h)),t=Math.max(1,Math.min(0>t?1+u+t:t,u)),k.i?(i=1,p=1+u,k.current=t,k.b=u):(i=Math.max(1,Math.min(t-k.current,u-k.b)+1),p=k.h?i+k.b:Math.min(i+k.b,1+u)));M--;){switch(o=0,g=k.g[M],g.f){case"left":o=g.c<i;break;case"right":o=p<=u-k.l+g.c;break;case"first":o=k.current<t;break;case"last":o=k.b<k.current+u-t;break;case"prev":o=t>1;break;case"next":o=u>t}m|=o<<g.j}for(f={number:v,lapping:h,pages:u,perpage:b.perpage,page:t,slice:[(o=t*(b.perpage-h)+h)-b.perpage,Math.min(o,v)]},s="";++M<x;){switch(g=k.g[M],o=m>>g.j&1,g.f){case"block":for(;p>i;++i)f.value=i,f.pos=1+k.b-p+i,f.active=u>=i||0>v,f.first=1===i,f.last=i===u&&v>0,n(b,f,g.f);continue;case"left":f.value=g.c,f.active=g.c<i;break;case"right":f.value=u-k.l+g.c,f.active=p<=f.value;break;case"first":f.value=1,f.active=o&&t>1;break;case"prev":(f.active=b.circular)?f.value=1===t?u:t-1:(f.value=Math.max(1,t-1),f.active=o&&t>1);break;case"last":(f.active=0>v)?f.value=1+t:(f.value=u,f.active=o&&u>t);break;case"next":(f.active=b.circular)?f.value=1+t%u:(f.active=0>v)?f.value=1+t:(f.value=Math.min(1+t,u),f.active=o&&u>t);break;case"leap":case"fill":f.pos=g.c,f.active=o,n(b,f,g.f);continue}f.pos=g.c,f.last=f.first=r,n(b,f,g.f)}return c.length&&(e("a",c.html(s)).click(b.onClick||function(r){r.preventDefault(),r=this;do if("a"===r.nodeName.toLowerCase())break;while(r=r.parentNode);l.setPage(e(r).data("page")),l.o&&(a.location=r.href)}),l.o=b.onSelect.call({number:v,lapping:h,pages:u,slice:f.slice},t,c)),l}};return l.setNumber(t).setOptions(n).setPage()}}(jQuery,this);