"use strict";var _win=window,Backbone=_win.Backbone;if(!Backbone)throw new Error("import Backbone");var tplEng=require("tplEng"),warn=require("./util/warn"),tools=require("./util/tools"),BaseView=Backbone.View.extend({initialize:function(t){return void 0===this.clientRender&&this.clientRender!==!1&&(this.clientRender=!0),this._ICEOptions=t||{},this.beforeMount&&"function"==typeof this.beforeMount&&this.beforeMount(),this._ICEOptions.id&&(this.$el=$(this._ICEOptions.id)),this._ICEinit(),this},_ICEinit:function(){var t=this;this.clientRender?"function"==typeof this.rawLoader&&(t._template=this.rawLoader(),t._template&&t.$el.append(t._template),t._ICEAfterMount(),t._ICEObject()):(t._ICEAfterMount(),t._ICEObject())},_ICEAfterMount:function(){"function"==typeof this.afterMount&&this.afterMount()},_ICEObject:function(){this.clientRender&&this._ICEinitEvent(),this._ICEinitNode(),this._store={},this.__YYTPC__=!0,"function"==typeof this.ready&&this.ready(this._ICEOptions)},_ICEinitEvent:function(){this.delegateEvents(this.events)},_ICEinitNode:function(){this.$parent=this._ICEOptions.parent,this.$children=[],this.$root=this.$parent?this.$parent.$root:this,this.$parent&&this.$parent.$children.push(this)},compileHTML:function(t,i){return tplEng.compile(t)(i)},broadcast:function(t){var i="string"==typeof t;t=i?t:t.name;for(var e=tools.toArray(arguments,1),n=this.$children,r=0,o=n.length;o>r;r++){var s=n[r];s.trigger.apply(s,e),s.broadcast.apply(s,e)}return this},dispatch:function(t){var i="string"==typeof t;t=i?t:t.name;for(var e=tools.toArray(arguments,1),n=this.$parent;n;)n.trigger.apply(n,e),n=n.$parent}});module.exports=BaseView;