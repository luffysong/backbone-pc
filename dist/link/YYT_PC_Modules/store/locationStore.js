"use strict";!function(e){var t="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"object"==typeof exports&&"object"==typeof module?module.exports=e():"object"==typeof exports?exports.store=e():(t.ICEPlugs||(t.ICEPlugs={}),t.ICEPlugs.store=e())}(function(){var e,t,r={},n=window,o="localStorage",i="sessionStorage",l="ICEStorageCache",a=function(){try{return o in n&&n[o]}catch(e){return!1}},u=function(){try{return i in n&&n[i]}catch(e){return!1}};r.disabled=!1,r.version="0.0.1",r.has=function(e){return void 0!==r.get(e)},r.transact=function(e,t,n){null==n&&(n=t,t=null),null==t&&(t={});var o=r.get(e,t);n(o),r.set(e,o)},r.serialize=function(e){return JSON.stringify(e)},r.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},a()&&(e=n[o],r.set=function(t,n){return void 0===n?r.remove(t):(e.setItem(t,r.serialize(n)),n)},r.get=function(t,n){var o=r.deserialize(e.getItem(t));return void 0===o?n:o},r.remove=function(t){e.removeItem(t)},r.clear=function(){e.clear()},r.getAll=function(){var e={};return r.forEach(function(t,r){e[t]=r}),e},r.forEach=function(t){for(var n=0;n<e.length;n++){var o=e.key(n);t(o,r.get(o))}},r.expiration={set:function(e,t,n){var o=r.get(l)||{};o[e]={val:t,exp:36e5*n,time:(new Date).getTime()},r.set(l,o)},get:function(e){var t=r.get(l);if(!t)return null;var n=t[e];return n?(new Date).getTime()-n.time>n.exp?null:n.val:null},getAll:function(){var e=r.get(l);return e||null},resetSave:function(e){r.set(l,e)}},u()&&(t=n[i],r.session={set:function(e,n){if(void 0===n)return r.remove(e);var o;o="[object Object]"===Object.prototype.toString.call(n)?r.serialize(n):n,t.setItem(e,o)},get:function(e){var n=r.deserialize(t.getItem(e));return void 0===n?defaultVal:n}}));try{var s="__storeJs__";r.set(s,s),r.get(s)!=s&&(r.disabled=!0),r.remove(s)}catch(c){r.disabled=!0}if(r.enabled=!r.disabled,r.enabled){var f=r.expiration.getAll();if(f)for(var g in f){var v=f[g];(new Date).getTime()-v.time>v.exp&&(v=null,delete f[g])}r.expiration.resetSave(f)}return r});