/**
 * @project yinyuetai_pc_live_video
 * @description 音悦台直播PC版
 * @version v1.0.0
 * @time 2016-3-17   14:3:7
 * @author YYT
 * @copy http://www.yinyuetai.com
 */
webpackJsonp([0],[function(e,n,o){$(function(){var e=o(9);new e;var n=o(61);new n,o(65)})},,,,,,,,,function(e,n,o){"use strict";var t=o(10),i=o(16),r=o(21),s=r.sharedInstanceUserModel(),a=o(33),c=o(20),d=(o(34),o(35)),f=t.extend({clientRender:!1,el:"#anchorContainerBg",events:{},beforeMount:function(){var e=c.parse(location.href);this.roomId=e.query.roomId||1,this.roomId||this.goBack(),this.roomDetail=new a},afterMount:function(){},ready:function(){this.userVerify()},initWebIM:function(){function e(e){$(document).trigger("event:groupSystemNotifys",e)}i.init({onConnNotify:function(e){$(document).trigger("event:onConnNotify",e)},onMsgNotify:function(e){$(document).trigger("event:onMsgNotify",e)},onGroupInfoChangeNotify:function(e){$(document).trigger("event:onGroupInfoChangeNotify",e)},groupSystemNotifys:{1:e,2:e,3:e,4:e,5:e,6:e,7:e,8:e,9:e,10:e,11:e,255:e}})},userVerify:function(){var e=this;s.getUserInfo(function(e){}),s.isLogined()?(e.initWebIM(),e.roomDetail.setChangeURL({deviceinfo:'{"aid": "30001001"}',accessToken:s.getToken(),roomId:this.roomId}),e.initRoom(),e.renderPage()):e.goBack()},initRoom:function(){var e=this;this.roomDetail.executeGET(function(e){$(document).trigger("event:roomInfoReady",e.data)},function(n){d.show({title:"提示",content:"获取房间数据失败!",okFn:function(){e.goBack()},cancelFn:function(){e.goBack()}})})},renderPage:function(){var e=o(37);new e;var n=o(44);new n;var t=o(48);new t;var i=o(53);new i;var r=o(57);new r},goBack:function(){}});e.exports=f},,,,,,,function(e,n,o){"use strict";var t=o(17),i=t.sharedInstanceIMModel(),r=o(19),s={setting:{listeners:{onMsgNotify:null,onGroupInfoChangeNotify:null,groupSystemNotifys:null}}};s.init=function(e){var n=this;i.fetchIMUserSig(function(o){n.im=o;var t={sdkAppID:o.imAppid,appIDAt3rd:o.imAppid,accountType:o.imAccountType,identifier:o.imIdentifier,userSig:o.userSig};o&&e&&webim.init(t,e,null)},function(e){})},s.sendMessage=function(e,n,o){var t=Math.floor(1e4*Math.random()),i=new webim.Session("GROUP",e.groupId,e.groupId,"",t);if(i){var r=new webim.Msg(i,!0);r.addText(new webim.Msg.Elem.Text(JSON.stringify(e.msg))),r.fromAccount=this.im.imIdentifier,webim.sendMsg(r,function(e){n&&n(e)},function(e){o&&o(e)})}},s.clearScreen=function(e){this.sendMessage(e)},s.lockScreen=function(){},s.disableSendMsg=function(e,n,o){var t=webim.Tool.formatTimeStamp(Math.round((new Date).getTime()/1e3)+600);t=new Date(t+"").getTime(),e=_.extend({ShutUpTime:t},e),webim.forbidSendMsg(e,function(e){n&&n(e)},function(e){o&&o(e)})},s.removeUserFromGroup=function(e,n,o){(!e||!e.GroupId||e.MemberToDel_Account.length<=0)&&o&&o({msg:"参数不正确"}),webim.deleteGroupMember(e,function(e){n&&n(e)},function(e){o&&o(e)})},s.msgNotify=function(e){},s.getRoomMsgs=function(e){for(var n=[],o=1;;){if(o++>20)break;n.push({name:"Aaron-"+o,msg:"asdfasdfasfjaslfjasklfasdklf"+o})}e&&e.call(this,n)},s.createIMChatRoom=function(e,n){var o=r.get("imSig"),t={Owner_Account:o.imIdentifier,Type:"ChatRoom",Name:"测试聊天室",Notification:"",Introduction:"",MemberList:[]};webim.createGroup(t,function(n){e&&e(n)},function(e){n&&n(e)})},s.getGroupInfo=function(e,n,o){var t={GroupIdList:[e],GroupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","CreateTime","Owner_Account","LastInfoTime","LastMsgTime","NextMsgSeq","MemberNum","MaxMemberNum","ApplyJoinOption"],MemberInfoFilter:["Account","Role","JoinTime","LastSendMsgTime","ShutUpUntil"]};webim.getGroupInfo(t,function(e){n&&n(e)},function(e){alert(e.ErrorInfo),o&&o(e)})},s.modifyGroupInfo=function(e,n,o){webim.modifyGroupBaseInfo(e,function(e){n&&n(e)},function(e){o&&o(e)})},e.exports=s},,,,,,,,,,,,,,,,,function(e,n,o){"use strict";var t=o(18),i=t.extend({url:"{{url_prefix}}/room/detail.json?deviceinfo={{deviceinfo}}&access_token=web-{{accessToken}}&roomId={{roomId}}",beforeEmit:function(e){}});e.exports=i},,,,function(e,n,o){var t=o(10),i=o(38),r=o(39),s=o(34),a=o(21),c=a.sharedInstanceUserModel(),d=t.extend({el:"#edit_background",rawLoader:function(){return o(43)},events:{"click .edit_bg_btn":"showFileUploadDialog"},beforeMount:function(){this.editBgModel=new i,this.uploadFile=new r(this.getFileUploadOptions())},afterMount:function(){this.changeBgBtn=$(".edit_bg_btn"),this.txtPopularity=$("#txtPopularity"),this.txtRoomName=$("#txtRoomName"),this.anchorContainerBg=$("#anchorContainerBg")},ready:function(){this.defineEventInterface()},defineEventInterface:function(){var e=this;$(document).on("event:roomInfoReady",function(n,o){o&&(e.roomInfo=o,e.txtRoomName.text(o.roomName||""),e.txtPopularity.text(o.popularity||0),e.roomInfo.imageUrl&&e.setBgStyle(e.roomInfo.imageUrl))})},getFileUploadOptions:function(){var e=this;return{width:580,height:341,isRemoveAfterHide:!1,isAutoShow:!1,mainClass:"shadow_screen_x",closeClass:"editor_bg_close_x",closeText:"X",title:"上传主题背景图片",ctrlData:{cmd:[{saveOriginal:1,op:"save",plan:"avatar",belongId:"20634338",srcImg:"img"}],redirect:window.location.origin+"/web/upload.html"},uploadFileSuccess:function(n){n&&n.images&&n.images.length>0&&(e.currentBgImg=n.images[0].path)},saveFile:function(){e.setBackgroundImg()}}},showFileUploadDialog:function(){this.currentBgImg="",this.uploadFile.show()},setBackgroundImg:function(){var e=this;return e.currentBgImg?(e.editBgModel.setChangeURL({accessToken:c.getToken(),deviceinfo:'{"aid": "30001001"}',roomId:this.roomInfo.id,imageUrl:e.currentBgImg}),void e.editBgModel.executeGET(function(n){n&&"0"===n.code?(e.setBgStyle(e.currentBgImg),e.uploadFile.hide(),s.showOK("背景图片设置成功")):s.showOK("背景图片设置失败,稍后重试")},function(e){s.showOK("背景图片设置失败,稍后重试")})):void s.showTip("请耐心等待图片上传完成!")},setBgStyle:function(e){e&&this.anchorContainerBg.css("background","url("+e+")")}});e.exports=d},function(e,n,o){var t=o(18),i=t.extend({url:'{{url_prefix}}/room/bg_set.json?deviceinfo={"aid":"30001001"}&access_token=web-{{accessToken}}&roomId={{roomId}}&imageUrl={{imageUrl}}',beforeEmit:function(e){}});e.exports=i},,,,,function(e,n){e.exports='<div class="title fl" id="txtRoomName">20160408金在中出道纪念会</div>\n<div class="popularity fl">人气:<span id="txtPopularity">0</span></div>\n<div class="edit_bg_btn fr">更换主题背景</div>\n<!--上传图片弹出层-->\n<div style="display: none;" class="shadow_screen">\n  <div class="shadow"></div>\n  <div class="edit_Bg_form">\n    <h2 class="edit_title">背景图设置<span class="upload-status">正在上传</span><span  class="upload-status">上传完成!</span><span class="close">X</span></h2>\n    <div class="formCon clearfix">\n      <div class="imgBox fl">\n        <img src="" alt="" style="display: none;">\n      </div>\n      <div class="formBox fl">\n        <form action="">\n          <div class="pseudo-uploadBtn">\n            上传图片\n            <input type="file" name="" id="file">\n          </div>\n          <p>支持5M以内的gif、jpg、jpge、png图片上传</p>\n          <div class="submit">保存</div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,n,o){var t=o(10),i=t.extend({el:"#currentAnchorInfo",rawLoader:function(){return o(46)},events:{},beforeMount:function(){this.infoTpl=o(47)},afterMount:function(){this.roomInfoWrap=$("#roomInfoWrap")},ready:function(){this.defineEventInterface()},defineEventInterface:function(){var e=this;$(document).on("event:roomInfoReady",function(n,o){var t=_.template(e.infoTpl),i=t(o);e.roomInfoWrap.append(i)})}});e.exports=i},,function(e,n){e.exports='<!--<span class="anchor_avator fl"></span>-->\n<img id="imgRoomPic" src="" alt="" class="anchor_avator fl">\n<dl class="anchorMsg fl" id="roomInfoWrap">\n</dl>\n'},function(e,n){e.exports="<dt><%=roomName%></dt>\n<dd>在线人数:<span><%=online%></span></dd>\n<dd>标签:<i>金在中</i><i>金在</i></dd>"},function(module,exports,__webpack_require__){var BaseView=__webpack_require__(10),YYTIMServer=__webpack_require__(16),RoomMessageModel=__webpack_require__(49),uiConfirm=__webpack_require__(35),UserModel=__webpack_require__(21),user=UserModel.sharedInstanceUserModel(),DateTime=__webpack_require__(50),msgBox=__webpack_require__(34),View=BaseView.extend({el:"#anchorCtrlChat",rawLoader:function(){return __webpack_require__(51)},events:{"click #btn-clear":"clearHandler","click #btn-lock":"lockClickHandler","click #msgList":"messageClickHandler"},beforeMount:function(){this.roomMsgModel=new RoomMessageModel,this.forbidUsers=[]},afterMount:function(){this.themeBgEle=$("#anchorContainerBg"),this.msgList=$("#msgList"),this.chatHistory=$("#chatHistory"),this.btnLock=$("#btn-lock"),this.defineEventInterface()},ready:function(){},clearHandler:function(){var e=this,n=e.checkLiveRoomReady();n&&uiConfirm.show({content:"您确定要清屏吗?",okFn:function(){e.clearMessageList(),YYTIMServer.clearScreen({groupId:e.roomInfo.imGroupid,msg:{roomId:e.roomInfo.id,nickName:"群主",smallAvatar:"",mstType:4}})}})},lockClickHandler:function(){var e=this.checkLiveRoomReady();if(e){var n=this.btnLock.children("span"),o=this,t="锁屏"==n.text()?"锁定屏幕":"解开屏幕";uiConfirm.show({content:"您确定要"+t+"吗?",okFn:function(){o.lockIMHandler("锁屏"==n.text())}})}},lockIMHandler:function(e){var n=this,o={GroupId:this.roomInfo.imGroupid};e===!0?o.Introduction=JSON.stringify({blockState:!!e,alert:"播主设定锁定屏幕，不能发送弹幕及礼物"}):o.Introduction=JSON.stringify({blockState:!1});var t=e===!0?"锁屏":"解屏";YYTIMServer.modifyGroupInfo(o,function(o){o&&"OK"==o.ActionStatus?(n.btnLock.children("span").text(e===!0?"解屏":"锁屏"),msgBox.showOK(t+"成功!")):msgBox.showError(t+"操作失败,请稍后重试")},function(e){msgBox.showError(t+"操作失败,请稍后重试")})},clearMessageList:function(){this.msgList.children().remove()},messageClickHandler:function(e){var n,o;n=$(e.target).parent(),n.hasClass("controls_forbid_reject")?this.msgControlHandler(e):(o=$(e.target).parents("li"),this.showMsgControlMenu(o))},showMsgControlMenu:function(e){if(!(e.length<=0)){var n=e.find(".controls_forbid_reject"),o=$("#msgList").find("li").index(e);$(".controls_forbid_reject").not(n).hide(),0===o&&n.css("margin-top","33px"),n.toggle()}},msgControlHandler:function(e){var n,o=$(e.target);n=o.parents("li"),"禁言"===o.text()?this.disableSendMsgConfirm({name:n.attr("data-name"),id:n.attr("data-id")}):"踢出"===o.text()&&this.removeUserFromRoom({name:n.attr("data-name"),id:n.attr("data-id")})},disableSendMsgConfirm:function(e){var n=this;uiConfirm.show({content:"您确定要禁止用户:<b>"+e.name+"</b>发言吗?",okFn:function(){n.disableSendMsgHandler(e)}})},disableSendMsgHandler:function(e){var n=this,o=[];o.push(e.id),YYTIMServer.disableSendMsg({GroupId:n.roomInfo.imGroupid,Members_Account:o},function(n){n&&"OK"===n.ActionStatus?msgBox.showOK("已将用户:<b>"+e.name+" 禁言10分钟."):msgBox.showError("禁言失败,请稍后重试!")},function(){msgBox.showError("禁言失败,请稍后重试!")})},hideUserControl:function(){$(".controls_forbid_reject").hide()},removeUserFromRoom:function(e){function n(){o.forbidUsers.length>200&&o.forbidUsers.shift(),o.forbidUsers.push(e.id);var n={GroupId:o.roomInfo.imGroupid,Notification:JSON.stringify({forbidUsers:o.forbidUsers})};YYTIMServer.modifyGroupInfo(n,function(n){n&&"OK"===n.ActionStatus?msgBox.showOK("成功将用户:<b>"+e.name+"</b>踢出房间"):msgBox.showError("将用户:<b>"+e.name+"</b>踢出房间失败,请稍后再试")})}var o=this;uiConfirm.show({content:"您确定要将用户:<b>"+e.name+"</b>踢出房间吗?",okFn:function(){n()}})},renderGroupMsgs:function(e){},onMsgNotify:function(notifyInfo){var self=this,msgObj={};if(notifyInfo&&notifyInfo.elems&&notifyInfo.elems.length>0)switch(msgObj=notifyInfo.elems[0].content.text+"",msgObj=msgObj.replace(/&quot;/g,"'"),eval("msgObj = "+msgObj),msgObj.fromAccount=notifyInfo.fromAccount,msgObj.mstType){case 0:self.addMessage(msgObj);break;case 1:break;case 2:break;case 3:break;case 4:}},onGroupInfoChangeNotify:function(e){},groupSystemNotifys:function(e){},getMessageTpl:function(){return __webpack_require__(52)},addMessage:function(e){var n=this;if(e=_.extend({nickName:"匿名",content:"",smallAvatar:"",time:n.getDateStr(new Date)},e),(!e||e.roomId===n.roomInfo.id)&&e&&e.content){var o=_.template(this.getMessageTpl());this.msgList.append(o(e)),this.chatHistory.scrollTop(this.msgList.height())}},defineEventInterface:function(){var e=this;$(document).on("event:LiveShowStarted",function(e,n){}),$(document).on("event:liveShowEnded",function(e,n){}),$(document).on("event:roomInfoReady",function(n,o){o&&(e.roomInfo=o,e.roomInfoReady())}),$(document).on("event:onConnNotify",function(e,n){}),$(document).on("event:onMsgNotify",function(n,o){e.onMsgNotify(o)}),$(document).on("event:onGroupInfoChangeNotify",function(n,o){e.onGroupInfoChangeNotify(o)}),$(document).on("event:groupSystemNotifys",function(n,o){e.groupSystemNotifys(o)})},roomInfoReady:function(){var e=this;e.getMessageFromServer(),e.getGroupInfo()},getMessageFromServer:function(){var e=this;e.roomMsgModel.setChangeURL({deviceinfo:'{"aid": "30001001"}',accessToken:user.getToken(),limit:100,endTime:0,startTime:0,cursor:"",roomId:e.roomInfo.id}),e.roomMsgModel.executeGET(function(e){},function(e){})},getGroupInfo:function(){var e=this;YYTIMServer.getGroupInfo(e.roomInfo.imGroupid,function(n){if(n&&"OK"===n.ActionStatus&&n.GroupInfo&&n.GroupInfo[0]&&n.GroupInfo[0].Introduction){var o=JSON.parse(n.GroupInfo[0].Introduction);o&&o.blockState===!0&&e.btnLock.children("span").text("解屏")}},function(e){msgBox.showError(e.msg||"获取群组消息失败!")})},getDateStr:function(e){var n=new Date(e);return n.Format("hh:MM:ss")},checkLiveRoomReady:function(){switch(this.roomInfo.status){case 0:return msgBox.showTip("该直播尚未发布!"),!1;case 1:case 2:return this.roomInfo&&this.roomInfo.imGroupid?!0:(msgBox.showTip("请先开始直播!"),!1);case 3:return msgBox.showTip("该直播已经结束!"),!1}}});module.exports=View},function(e,n,o){"use strict";var t=o(18),i=t.extend({url:"{{url_prefix}}/message/get.json?deviceinfo={{deviceinfo}}&access_token=web-{{accessToken}}&roomId={{roomId}}&startTime={{startTime}}&endTime={{endTime}}&cursor={{cursor}}&limit={{limit}}",beforeEmit:function(e){}});e.exports=i},,function(e,n){e.exports='<div class="controls clearfix">\n    <div id="btn-clear" class="fl"><img src="../img/clear.png" alt="">清屏</div>\n    <div id="btn-lock" class="fl"><img src="../img/clock.png" alt="" class="lock"><span>锁屏</span></div>\n</div>\n<div class="chatCon" id="chatHistory">\n    <!--聊天记录-->\n    <ul id="msgList">\n    </ul>\n</div>\n'},function(e,n){e.exports='<li class="clearfix" data-name="<%=nickName%>" data-id="<%=fromAccount%>">\n  <img onerror="this.src=\'../img/visitor_avator.jpg\'" src="<%=smallAvatar%>" alt="" class="fl visitor_avator">\n  <p class="visitor_chat fl">\n    <span class="visitorName"><%=nickName%>:</span>\n    <%=content%>\n    <span class="time fr"><%=time%></span>\n  </p>\n  <div class="controls_forbid_reject">\n    <a href="javascript:;" class="forbid">禁言</a>\n    <a href="javascript:;" class="reject">踢出</a>\n  </div>\n</li>\n'},function(e,n,o){"use strict";var t=o(10),i=o(54),r=o(55),s=o(16),a=o(21),c=a.sharedInstanceUserModel(),d=o(34),f=t.extend({el:"#noticeWraper",rawLoader:function(){return o(56)},events:{"click #btnEditNotice":"editClickHandler","click .closeNoticePanel":"panelDisplay","click #btnSubmitNotice":"submitClickHandler"},beforeMount:function(){this.noticeModel=new i,this.noticeGetModel=new r,this.noticeInfo={content:""}},afterMount:function(){this.editNoticPanel=$("#editNoticPanel"),this.noticeWrap=$("#noticeWrap"),this.txtNotice=$("#txtNotice"),this.imgRoomPic=$("#imgRoomPic"),this.errNoticeTip=$("#errNoticTip")},ready:function(){this.defineEventInterface()},editClickHandler:function(e){this.panelDisplay(!0)},panelDisplay:function(e){this.errNoticeTip.text(""),e===!0?(this.txtNotice.val(this.noticeInfo.content),this.editNoticPanel.show()):this.editNoticPanel.hide()},submitClickHandler:function(e){var n=this.txtNotice.val().trim(),o=this;return!n||n.length>50||n.length<=0?(this.errNoticeTip.text("公告文字请在50字以内"),null):void this.noticeModel.executePOST({roomId:this.roomInfo.id,content:n},function(e){e&&"0"==e.code?($(document).trigger("event:noticeChanged",n),o.roomInfo.desc=n,o.noticeWrap.text(n),o.panelDisplay()):d.showError("数据保存失败,请稍后重试")},function(e){d.showError("数据保存失败,请稍后重试")})},sendNotifyToIM:function(e){s.sendMessage({groupId:this.roomInfo.imGroupid,msg:{roomId:this.roomInfo.id,nickName:"主播",smallAvatar:"",mstType:2,content:e}},function(e){},function(n){e.log(n)})},defineEventInterface:function(){var e=this;$(document).on("event:roomInfoReady",function(n,o){o&&(e.roomInfo=o),e.getNoticeInfo(),o.imageUrl&&e.imgRoomPic.attr("src",o.imageUrl)})},getNoticeInfo:function(){var e=this;this.noticeGetModel.setChangeURL({deviceinfo:'{"aid":"30001001"}',roomId:this.roomInfo.id,accessToken:c.getToken()}),this.noticeGetModel.executeGET(function(n){if(n&&n.data){var o=null;n.data.placards&&(o=n.data.placards[0]),o?(e.noticeInfo=o,e.noticeWrap.text(o.content||"暂无公告"),e.txtNotice.val(o.content)):e.noticeWrap.text("暂无公告")}},function(e){d.showErr(e.msg||"获取公告失败")})}});e.exports=f},function(e,n,o){"use strict";var t=o(18),i=t.extend({url:"{{url_prefix}}/room/placard_create.json",beforeEmit:function(e){}});e.exports=i},function(e,n,o){"use strict";var t=o(18),i=t.extend({url:"{{url_prefix}}/room/placard_get.json?deviceinfo={{deviceinfo}}&access_token=web-{{accessToken}}&roomId={{roomId}}",beforeEmit:function(e){}});e.exports=i},function(e,n){e.exports='<h2 class="clearfix annoucement">\n    <span class="fl .annoucement_title">公告</span>\n    <span id="btnEditNotice" class="fr annoucement_editr">编辑</span>\n</h2>\n<p id="noticeWrap"></p>\n<!--编辑公告弹出框-->\n<div id="editNoticPanel" style="display: none;" class="shadow_screen">\n    <div class="shadow closeNoticePanel"></div>\n    <div class="edit_annmoucement_con">\n        <h2 class="edit_title">文字输入<span class="close closeNoticePanel">X</span></h2>\n        <div class="editCon">\n            <h3>公告内容:</h3>\n            <textarea id="txtNotice" placeholder="(公告文字请在50字以内)" maxlength="50"></textarea>\n            <div id="errNot ticTip" class="errTip"></div>\n            <p style="padding-top: 16px;">\n                <a href="####" class="cancel closeNoticePanel">取消</a>\n                <a id="btnSubmitNotice" href="####" class="submit">确定</a>\n            </p>\n        </div>\n    </div>\n</div>\n'},function(e,n,o){"use strict";var t=o(10),i=o(16),r=o(35),s=o(34),a=o(58),c=o(59),d=o(21),f=d.sharedInstanceUserModel(),u=t.extend({el:"#liveShowBtnWraper",rawLoader:function(){return o(60)},events:{"click .endLive":"endLiveClick","click .startLive":"startLiveClick"},beforeMount:function(){this.startLiveModel=new a,this.endLiveModel=new c},afterMount:function(){this.btnEndLive=$(".endLive"),this.btnStartLive=$(".startLive"),this.defineEventInterface()},ready:function(){},startLiveClick:function(e){var n=$(e.target),o=this;return n.hasClass("m_disabled")?null:(n.addClass("m_disabled"),this.btnEndLive.removeClass("m_disabled"),this.roomInfo?void(this.roomInfo.imGroupid?o.startLive():i.createIMChatRoom(function(e){o.roomInfo.imGroupid=e.GroupId,o.startLive()},function(e){})):(s.showError("没有获取到房间信息"),""))},startLive:function(){var e=this;e.startLiveModel.setChangeURL({deviceinfo:JSON.stringify({aid:"30001001"}),accessToken:f.getToken(),roomId:e.roomInfo.id,imGroupId:encodeURIComponent(e.roomInfo.imGroupid)}),e.startLiveModel.executeGET(function(e){s.showOK("成功开启直播"),$(document).trigger("event:LiveShowStarted")},function(e){s.showError(e.msg)})},endLiveClick:function(e){var n=this;return this.btnEndLive.hasClass("m_disabled")?null:void r.show({title:"消息",content:"您确定要结束直播吗",okFn:function(){n.endLive()},cancelFn:function(){}})},endLive:function(){var e=this;e.endLiveModel.setChangeURL({deviceinfo:'{"aid": "30001001"}',accessToken:f.getToken(),roomId:e.roomInfo.id}),e.endLiveModel.executeGET(function(n){e.btnEndLive.addClass("m_disabled"),e.isLiveShowing=!1,$(document).trigger("event:liveShowEnded"),e.btnStartLive.removeClass("m_disabled")},function(e){s.showError(e.msg)})},defineEventInterface:function(){var e=this;$(document).on("event:roomInfoReady",function(n,o){o&&(e.roomInfo=o,e.changeButtonStatus(e.roomInfo.status))})},changeButtonStatus:function(e){2===e&&(this.btnStartLive.addClass("m_disabled"),this.btnEndLive.removeClass("m_disabled"))}});e.exports=u},function(e,n,o){"use strict";var t=o(18),i=t.extend({url:"{{url_prefix}}/room/start.json?deviceinfo={{deviceinfo}}&access_token=web-{{accessToken}}&roomId={{roomId}}&imGroupId={{imGroupId}}",beforeEmit:function(e){}});e.exports=i},function(e,n,o){"use strict";var t=o(18),i=t.extend({url:"{{url_prefix}}/room/close.json?deviceinfo={{deviceinfo}}&access_token=web-{{accessToken}}&roomId={{roomId}}",beforeEmit:function(e){}});e.exports=i},function(e,n){e.exports='<div class="endLive m_disabled">结束本次直播</div>\n<div class="startLive">开启直播</div>\n'},,,,,function(e,n){}]);