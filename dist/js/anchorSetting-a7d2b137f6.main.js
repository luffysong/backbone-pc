/**
 * @project yinyuetai_pc_live_video
 * @description 音悦台直播PC版
 * @version v1.0.0
 * @time 2016-3-29   17:39:19
 * @author YYT
 * @copy http://www.yinyuetai.com
 */
webpackJsonp([1],[function(e,t,i){$(function(){var e=i(68);new e,i(97)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var n={},a={title:"消息",content:"",okFn:null,cancelFn:null};n.init=function(e){var t=_.template(this.getHTML()),i=t(e);this.remove(),this.bindEvent(i,e.okFn,e.cancelFn)},n.remove=function(){var e=$("#UIConfigWrap");e&&e.length>=1&&e.remove()},n.getHTML=function(){return i(35)},n.bindEvent=function(e,t,i){var n=this;e=$(e),e.find("#UIConfirmOk").on("click",function(e){return e.preventDefault(),t&&t(),n.remove(),!1}),e.find(".UIConfirmClose").on("click",function(e){return e.preventDefault(),i&&i(),n.remove(),!1}),e.find("#UIConfirmOk").on("click",function(e){return e.preventDefault(),n.remove(),!1}),$("body").append(e)},n.show=function(e){var t=_.extend(a,e);this.init(t)},n.close=function(){this.remove()},e.exports={show:function(e){n.show(e)},close:function(){n.close()}}},function(e,t){e.exports='<div id="UIConfigWrap" class="shadow_screen">\r\n    <div class="shadow UIConfirmClose"></div>\r\n    <div class="edit_annmoucement_con" style="margin-bottom: 16px; width: 400px;height: 200px;margin-left:-200px;">\r\n        <h2 class="edit_title"><span id="UIConfirmTitle"><%=title%></span> <span class="close UIConfirmClose">X</span></h2>\r\n        <div class="editCon" style="width: 400px;padding-top: inherit;">\r\n            <div style="padding:16px; font-size: 14px;"><%=content%></div>\r\n            <p style="padding-top: 16px;">\r\n                <a href="####" class="cancel UIConfirmClose">取消</a>\r\n                <a id="UIConfirmOk" href="####" class="submit">确定</a>\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>'},,,,function(e,t,i){"use strict";var n=i(40),a=i(22),s=i(41),r=function(e){var t=this;this.options=e,this.dialog=a.classInstanceDialog(n,e),this.helper=new s({ctrlData:this.options.ctrlData,id:"#"+this.dialog.id}),this.helper.on("uploadFileSuccess",function(e){"function"==typeof t.options.uploadFileSuccess&&t.options.uploadFileSuccess(e)}),this.helper.on("saveFile",function(){"function"==typeof t.options.saveFile&&t.options.saveFile()})};r.prototype.show=function(e){this.helper&&e&&this.helper.trigger("successBreviary",e),this.dialog.show()},r.prototype.hide=function(){this.dialog.hide()},r.prototype.emptyValue=function(){this.helper&&this.helper.emptyValue()},r.prototype.parseErrorMsg=function(e){if(e&&"SUCCESS"==e.state)return!0;var t=1*e.errCode||0;switch(t){case 29:return"上传的文件太大了,请重新上传";case 31:return"请上传JPGE,JPG,PNG,GIF等格式的图片文件"}return"文件上传失败,请重新上传"};var o=null;r.sharedInstanceUploadFileDialog=function(e){return o||(o=new r(e)),o},e.exports=r},function(e,t){e.exports='<div class="shadow"></div>\r\n<div class="edit_Bg_form_x" id="uploadFileDialog">\r\n	<h2 class="edit_title">\r\n		<span class="upload-title">背景图设置</span>\r\n		<span class="upload-status upload-image-state"></span>\r\n	</h2>\r\n	<div class="formCon clearfix">\r\n		<div class="imgBox fl">\r\n			<img src="" alt="" width="100%" height="100%"  style="display: none;" class="imgboxFile">\r\n		</div>\r\n		<div class="formBox fl">\r\n			<div class="pseudo-uploadBtn">\r\n				<span class="input-text">上传图片</span>\r\n				<form class="upload-form">\r\n\r\n				</form>\r\n			</div>\r\n			<p>支持5M以内的gif、jpg、jpge、png图片上传</p>\r\n			<div class="submit">保存</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n'},function(e,t,i){"use strict";var n=i(10),a=i(42),s="正在上传",r="上传完成!",o=i(43),l=window.location,c=n.extend({rawLoader:function(){},events:{"click .submit":"saveHandler","change .upload-file":"changeFile"},beforeMount:function(){},afterMount:function(){this.formDOM=this.$el.find(".upload-form"),this.imgSrcDOM=this.$el.find(".imgboxFile"),this.imageStateDOM=this.$el.find(".upload-image-state"),this.inputTextDOM=this.$el.find(".input-text")},ready:function(e){var t=e.ctrlData||{cmd:[{saveOriginal:1,op:"save",plan:"avatar",belongId:"20634338",srcImg:"img"}],redirect:l.origin+"/web/upload.html"},i=this;this.upload=a.classInstanceUploadFile({el:this.formDOM,url:"http://image.yinyuetai.com/edit",data:t,filename:"img",className:"file",success:function(e){i.imageStateDOM.html(r),i.previewImage(e),i.trigger("uploadFileSuccess",e)},failure:function(){o.showError("上传失败")}}),this.on("successBreviary",function(e){this.successBreviary(e)})},successBreviary:function(e){this.emptyValue(),e.breviaryUrl&&(this.imgSrcDOM.attr("src",e.breviaryUrl),this.imgSrcDOM.show()),e.inputText&&this.inputTextDOM.text(e.inputText)},saveHandler:function(e){this.trigger("saveFile")},changeFile:function(e){this.imageStateDOM.html(s),this.upload.submit()},previewImage:function(e){var t=e.images;if(t&&t.length>0){var i=t[0].path;this.imgSrcDOM.attr("src",i),this.imgSrcDOM.show()}},emptyValue:function(){this.imageStateDOM.html(""),this.imgSrcDOM.hide(),this.inputTextDOM.text("上传图片")}}),d=null;c.sharedInstanceUploadFileDialog=function(e){return d||(d=new c(e)),d},c.fetchDialogTemplate=function(){return i(40)},e.exports=c},function(e,t,i){(function(t){"use strict";!function(i){"object"==typeof self&&self.self==self&&self||"object"==typeof t&&t.global==t&&t;e.exports=i()}(function(){var e=999,t=window,n=t.ICEPlugs||{},a=n.url;a||(a=i(20));var s=n.tools;s||(s=i(15));var r=n.AjaxForm;r||(r=i(27));var o=null,l=function(t){var i=this;return this.$el="string"==typeof t.el?$(t.el):t.el,this.uid="UploadFile"+e++,this.options=t,this._data=t.data||{},this._filename=t.filename||"image",this._success=t.success,this._before=t.before,this._failure=t.failure,this._url=t.url,this._url?(this._init(),void(this.ajaxForm=r.classInstanceAjaxForm(this.$el,{type:"img",success:function(){var e=this.contentWindow,t=(e.location,decodeURIComponent(e.location.search)),n=a.parseSearch(t);"function"==typeof i._success&&i._success.call(this,n)},failure:function(){"function"==typeof i._failure&&i._failure.call(this)}}))):void console.warn("配置上传URL")};return l.prototype._init=function(){this._createElement()},l.prototype._createElement=function(){var e="";for(var t in this._data){var i=this._data[t],n=s.toType(i);"[object Object]"!==n&&"[object Array]"!==n||(i=JSON.stringify(i)),e+='<input type="hidden" name="'+t+"\" value='"+i+"'/>"}e+='<input type="file" class="upload-file '+this.options.className+'" name="'+this._filename+'"  />',this.$el.attr("method","POST"),this.$el.attr("action",this._url),this.$el.attr("enctype","multipart/form-data"),this.$el.append(e)},l.prototype.submit=function(){this.ajaxForm.setIframeState(!0),"function"==typeof this._before&&this._before(),this.$el.submit()},l.sharedInstanceUploadFile=function(e){return o||(o=new l(e)),o},l.classInstanceUploadFile=function(e){return new l(e)},l.prototype.parseErrorMsg=function(e){if(e&&"SUCCESS"==e.state)return!0;var t=1*e.errCode||0;switch(t){case 29:return"上传的文件太大了,请重新上传";case 31:return"请上传JPGE,JPG,PNG,GIF等格式的图片文件"}return"文件上传失败,请重新上传"},l})}).call(t,function(){return this}())},,,,,,,function(e,t,i){(function(t){"use strict";!function(i){"object"==typeof self&&self.self==self&&self||"object"==typeof t&&t.global==t&&t;e.exports=i()}(function(){var e=function(e){this.temp=new Date,this.setCurNewDate(e)};e.prototype.changeYear=function(e){this.temp.setFullYear(e)},e.prototype.getCountDays=function(e){return this.temp.setMonth(e),this.temp.setDate(0),this.temp.getDate()},e.prototype.$get=function(e){return this.attrs[e]},e.prototype.ceilYear=function(e){e=~~e;for(var t=0,i=this.$get("year"),n=[];e>=t;t++)n.push(i),i+=1;return n},e.prototype._downDisplacement=function(e){var t,i=this.$get(e),n=[];switch(e){case"month":t=12;break;case"day":t=this.getCountDays(this.$get("month"));break;case"hours":t=23;break;default:t=59}for(;t>=i;i++)n.push(i);return n},e.prototype.downMonth=function(){return this._downDisplacement("month")},e.prototype.downDay=function(){return this._downDisplacement("day")},e.prototype.downHours=function(){return this._downDisplacement("hours")},e.prototype.downMinutes=function(){return this._downDisplacement("minutes")},e.prototype.down=function(e){return this._downDisplacement(e)},e.prototype.getTime=function(e){var t="",i=e.month<10?"0"+e.month:e.month,n=e.day<10?"0"+e.day:e.day,a=e.hours<10?"0"+e.hours:e.hours,s=e.minutes<10?"0"+e.minutes:e.minutes;return t+=e.year+"-"+i+"-"+n+" ",t+=a+":"+s+":00",new Date(t.replace(/-/g,"/")).getTime()},e.prototype.setCurNewDate=function(e){this.date=null,this.date=e?new Date(e):new Date,this._setAttrs()},e.prototype._setAttrs=function(){this.attrs=null,this.attrs={year:this.date.getFullYear(),month:this.date.getMonth()+1,day:this.date.getDate(),hours:this.date.getHours(),minutes:this.date.getMinutes()}},e.difference=function(e){var t={},i=e%864e5,n=Math.floor(i/36e5);t.hours=10>n?"0"+n:n;var a=i%36e5,s=Math.floor(a/6e4);t.minutes=10>s?"0"+s:s;var r=a%6e4,o=Math.floor(r/1e3);return t.seconds=10>o?"0"+o:o,t};var t=null;return e.sharedInstanceDateTime=function(){return t||(t=new e),t},e}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e}}).call(t,function(){return this}())},,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(10),a=i(21),s=i(61),r=i(17),o=i(69),l=i(19),c=i(70),d=i(72),h=i(75),u=i(78),p=(i(22),i(39)),f=r.sharedInstanceIMModel(),m=a.sharedInstanceUserModel(),v=i(43),g=window.location.origin,w=n.extend({el:"#settingContent",events:{"click #editBgBtn":"editBgHandler"},rawLoader:function(){return i(96)},beforeMount:function(){this.topbarView=new s,this.isLogined=!1,this.upload=null,this.bgTheme=null,this.anchorSig=null,this.updateBgParameter={deviceinfo:'{"aid":"30001001"}'},this.tempImg=null,this.saveLock=!0,this.uploadSate=!1,this.updateBgModel=new o},afterMount:function(){this.profileBg=$("#profileBg")},ready:function(){var e=this;m.isLogined()?this.fetchIMUserSig():(l.remove("imSig"),l.set("signout",1),window.location.href=g+"/web/login.html",this.topbarView.on("logined",function(){e.fetchIMUserSig()}))},initRender:function(){var e=this,t={width:580,height:341,isRemoveAfterHide:!1,isAutoShow:!1,mainClass:"shadow_screen_x",closeClass:"editor_bg_close_x",closeText:"X",title:"背景设置",ctrlData:{cmd:[{saveOriginal:1,op:"save",plan:"avatar",belongId:"20634338",srcImg:"img"}],redirect:window.location.origin+"/cross-url/upload.html"},uploadFileSuccess:function(t){var i=e.upload.parseErrorMsg(t);1==i?(e.uploadSate=!0,e.uploadSuccess(t)):v.showTip(i)},saveFile:function(){e.uploadSate?e.saveFile():v.showError("正在上传，请等待")}};this.upload=new p(t),this.isLogined=!0,this.profileView=new c,this.pageContentView=new u,this.editProfileView=new d,this.updatePasswordView=new h},fetchIMUserSig:function(){var e=this;this.updateBgParameter.access_token="web-"+m.getToken(),f.fetchIMUserSig(function(t){t.anchor?(e.anchorSig=t,e.bgTheme=t.anchor.bgTheme,e.setPageBgimg(t.anchor.bgTheme),e.initRender()):l.remove("imSig")},function(e){v.showError("获取签名错误")})},editBgHandler:function(e){if(this.isLogined){var t=null;this.anchorBg&&(t={inputText:"编辑背景",breviaryUrl:this.anchorBg}),this.upload.emptyValue(),this.upload.show(t)}else v.showError("未登录或获取签名失败")},uploadSuccess:function(e){var t=e.images,i=t[0].path;this.tempImg=i},saveFile:function(){var e=this;this.saveLock&&(this.saveLock=!1,this.bgTheme=this.tempImg,this.updateBgParameter.bgTheme=this.bgTheme,this.updateBgModel.executeJSONP(this.updateBgParameter,function(t){var i=t.code;~~i?v.showError(t.msg):(e.saveLock=!0,e.setPageBgimg(t.data.bgTheme),e.upload.hide(),f.updateIMUserSig())},function(t){e.saveLock=!0,v.showError("保存背景图出错")}))},setPageBgimg:function(e){e&&this.profileBg.css("background","url("+e+")")}});e.exports=w},function(e,t,i){"use strict";var n=i(18),a=n.extend({url:"{{url_prefix}}/user/bgtheme_update.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&bgTheme={{bgTheme}}",beforeEmit:function(e){}});e.exports=a},function(e,t,i){"use strict";var n=i(10),a=i(71),s=i(17),r=s.sharedInstanceIMModel(),o=n.extend({el:"#settingProfile",events:{},rawLoader:function(){},beforeMount:function(){this.data={nickName:r.$get("data.nickName"),bigheadImg:r.$get("data.largeAvatar"),anchor:r.$get("data.anchor")}},afterMount:function(){this.elements={}},ready:function(){this.initRender(),this.defineEventInterface()},initRender:function(){var e=this.$el,t=this.compileHTML(a,this.data);this.$el.html(t),this.elements.nickName=e.find("#nickName"),this.elements.headAvatar=e.find("#headAvatar"),this.elements.tagsWrap=e.find("#tagsWrap")},partialRender:function(e){this.elements.nickName.text(e.nickName),this.elements.headAvatar.attr("src",e.headImg);var t="";for(var i in e.tags)t+="<span>"+e.tags[i]+"</span>";this.elements.tagsWrap.html(t)},defineEventInterface:function(){var e=this;Backbone.on("event:userProfileChanged",function(t){e.partialRender(t)})}});e.exports=o},function(e,t){e.exports='<div  class="fl avatorBg">\r\n	<img style="width: 100p; height: 100px;" id="headAvatar" src="{{bigheadImg}}" alt="">\r\n</div>\r\n<div class="fl anchorrMsg">\r\n	<h2>\r\n		<span id="nickName" class="fl name">{{nickName}}</span>\r\n		<span class="fl aPnum">主持直播：<i>{{anchor.liveCount}}</i>场</span>\r\n	</h2>\r\n	<p id="tagsWrap">\r\n		标签：\r\n		{{each anchor.tags as item}}\r\n			<span>{{item}}</span>\r\n		{{/each}}\r\n	</p>\r\n</div>'},function(e,t,i){"use strict";var n=i(10),a=i(73),s=i(21),r=s.sharedInstanceUserModel(),o=i(42),l=i(43),c=i(17),d=c.sharedInstanceIMModel(),h=n.extend({el:"#editProfile",rawLoader:function(){return i(74)},events:{"change #userAvatarForm":"submitFile","keyup .userInfoChanged":"verifyForm","click #btnSave":"saveuserinfo"},beforeMount:function(){this.userUpdateModel=new a},afterMount:function(){var e=this.$el;this.txtImg=$("#txtImg"),this.txtName=$("#txtName"),this.txtTags=$("#txtTags"),this.btnSave=$("#btnSave"),this.btnUploadAvatar=e.find("#btnUploadAvatar"),this.imgUserAvatar=$("#imgUserAvatar")},ready:function(){this.initUploadFile(),this.fetchIMUserInfo()},initForm:function(){var e=this;e.userInfo.smallAvatar&&(e.imgUserAvatar.attr("src",e.userInfo.smallAvatar),e.txtImg.val(e.userInfo.smallAvatar)),e.txtName.val(e.userInfo.nickName);var t=e.userInfo.anchor.tags.join(",")||"";e.txtTags.val(t)},fetchIMUserInfo:function(){var e=this;d.fetchIMUserSig(function(t){e.userInfo=t,e.initForm()})},verifyForm:function(){var e=$.trim(this.txtName.val()),t=/^[0-9A-Za-z\u4e00-\u9fa5]{1,15}$/g,i=$.trim(this.txtTags.val());if(this.btnSave.addClass("m_disabled"),!e||0==e.length)return l.showTip("请输入您的昵称"),!1;if(e.length>30)return l.showTip("昵称长度不能超过15个字!"),!1;if(!t.test(e))return l.showTip("昵称允许包含:中文,数字以及字母!"),!1;i=i.split(/[,，]/);for(var n=[],a=!1,s="",r=i.length;r>=0;r--)s=$.trim(i[r]),s.length>=1&&n.push(s),s.length>5&&(a=!0);return i=n,i&&0!=i.length?a?(l.showTip("每个标签最多5个字,请检查您的标签!"),!1):i.length>5?(l.showTip("您最多输入5个标签,请删掉一些标签"),!1):!this.txtImg.val()||this.txtImg.val().length<=0?(l.showTip("请上传头像图片"),!1):(this.btnSave.removeClass("m_disabled"),!0):(l.showTip("请输入至少一个标签,多个标签请用逗号分隔!"),!1)},initUploadFile:function(){var e={cmd:[{saveOriginal:1,op:"save",plan:"avatar",belongId:"20634338",srcImg:"img"}],redirect:window.location.origin+"/cross-url/upload.html"},t=this;t.upload=o.classInstanceUploadFile({el:$("#userAvatarForm"),url:"http://image.yinyuetai.com/edit",data:e,filename:"img",className:"file",success:function(e){t.changeUploadBtnStatus(),t.fileUploaded(e)},failure:function(){t.changeUploadBtnStatus(),l.showError("上传失败")}})},changeUploadBtnStatus:function(e){e?(this.btnUploadAvatar.parent().addClass("m_disabled"),this.btnUploadAvatar.text("正在上传")):(this.btnUploadAvatar.parent().removeClass("m_disabled"),this.btnUploadAvatar.text("重新上传"))},submitFile:function(){var e=this.btnUploadAvatar.parent();e.hasClass("m_disabled")||(this.changeUploadBtnStatus(!0),this.upload.submit())},fileUploaded:function(e){var t=this.upload.parseErrorMsg(e);if(1==t){var i=e.images[0].path;this.txtImg.val(i),this.imgUserAvatar.attr("src",i),this.verifyForm()}else l.showTip(t)},saveuserinfo:function(){var e=this;if(e.isChanged()&&this.verifyForm()){e.btnSave.text("保存中");var t={deviceinfo:'{"aid": "30001001"}',access_token:"web-"+r.getToken(),nickname:$.trim(e.txtName.val()),headImg:e.txtImg.val(),tags:e.txtTags.val().replace(/[,，]+/g,",")};this.userUpdateModel.executeJSONP(t,function(t){e.btnSave.text("保存"),t&&"0"===t.code?(l.showOK("数据保存成功!"),d.updateIMUserSig(),e.fetchIMUserInfo(),Backbone.trigger("event:userProfileChanged",{nickName:$.trim(e.txtName.val()),headImg:e.txtImg.val(),tags:e.txtTags.val().split(/[,，]/)})):l.showError("数据保存失败,请稍后重试!")},function(t){l.showError("数据保存失败,请稍后重试!"),e.btnSave.text("保存")})}},isChanged:function(){var e=$.trim(this.txtName.val()),t=$.trim(this.txtTags.val()).replace(/[,，]/g,",");return e==this.userInfo.userName&&t==this.userInfo.anchor.tags.join(",")&&this.txtImg.val()==this.userInfo.bigheadImg?(this.btnSave.addClass("m_disabled"),!1):!0}});e.exports=h},function(e,t,i){"use strict";var n=i(18),a=n.extend({url:"{{url_prefix}}/user/update.json?deviceinfo={{deviceinfo}}&access_token=web-{{accessToken}}&nickname={{nickname}}&headImg={{headImg}}&tags={{tags}}",beforeEmit:function(e){}});e.exports=a},function(e,t){e.exports='<ul>\r\n    <li class="uploadAvator">\r\n        <span class="fl PiTitle"><i>*</i>头像：</span>\r\n        <div class="fl">\r\n            <img id="imgUserAvatar" data-src="../img/personInfo-uploadBg.png" src="../img/personInfo-uploadBg.png"\r\n                 alt="" class="fl avatorNow">\r\n            <div class="uploadform fl">\r\n                <!-- <form id="ieditAvatar" class="upload-form"></form> -->\r\n                <!-- <input type="file" name="" class="file"> -->\r\n                <div class="">\r\n                    <span id="btnUploadAvatar">上传图片</span>\r\n                    <form id="userAvatarForm" class="upload-form"></form>\r\n                </div>\r\n                <p>支持5M以内的gif、jpg、jpeg、png图片上传</p>\r\n            </div>\r\n            <input id="txtImg" type="hidden" value="">\r\n        </div>\r\n    </li>\r\n    <li class="Inp_Pc_name">\r\n        <span class="fl PiTitle"><i>*</i>昵称：</span>\r\n        <div class="fl">\r\n            <input id="txtName" placeholder="昵称" class="userInfoChanged" maxlength="30" type="text">\r\n            <span style="display: none;" class="tips"><img src="../img/1.jpg" alt="">你的名字里有敏感词，请重新输入 </span>\r\n        </div>\r\n    </li>\r\n    <li class="tags">\r\n        <span class="fl PiTitle"><i>*</i>标签：</span>\r\n        <div class="fl">\r\n            <input id="txtTags" class="userInfoChanged" type="text" placeholder="(多个标签中间请用逗号隔开)">\r\n            <!--<br>-->\r\n            <!--<input type="text">-->\r\n            <!--<br>-->\r\n            <!--<input type="text">-->\r\n            <!--<br>-->\r\n            <!--<input type="text">-->\r\n            <!--<br>-->\r\n            <!--<input type="text">-->\r\n            <!--<br>-->\r\n            <!--<input type="text">-->\r\n            <!--<br>-->\r\n            <div class="light-color">多个标签中间请用逗号隔开,每个标签最多5个字,最多拥有5个标签.</div>\r\n        </div>\r\n    </li>\r\n    <li id="btnSave" class="save m_disabled">保存</li>\r\n</ul>\r\n'},function(e,t,i){"use strict";var n=i(10),a=i(76),s=i(27),r=i(43),o=i(20),l=n.extend({el:"#updatePassword",rawLoader:function(){return i(77)},events:{"click #btnPwdSave":"updatePwd","keyup #txtConfirmPwd":"changeBtnStatus"},beforeMount:function(){this.updatePwdModel=new a},afterMount:function(){var e=this.$el;this.txtOldPwd=e.find("#txtOldPwd"),this.txtNewPwd=e.find("#txtNewPwd"),this.txtConfirmPwd=e.find("#txtConfirmPwd"),this.btnPwdSave=e.find("#btnPwdSave"),this.formPwd=e.find("#formPwd")},ready:function(){this.initAjaxForm()},verifyForm:function(){var e=this.txtOldPwd.val();if(!e||e.length<=0)return r.showTip("请输入您当前的密码"),!1;var t=this.txtNewPwd.val(),i=/[\S]{6,18}/;if(!t||t.length<=0)return r.showTip("请输入新的密码"),!1;if(t==e)return r.showTip("新密码不能跟旧密码一致"),!1;if(!i.test(t))return r.showTip("密码的长度建议6~18位,允许输入字母、数字、符号"),!1;var n=this.txtConfirmPwd.val();return t!=n?(r.showTip("2次输入的新密码不一致!"),!1):!0},changeBtnStatus:function(){var e=this.txtNewPwd.val(),t=this.txtConfirmPwd.val();e!=t?this.btnPwdSave.addClass("m_disabled"):this.btnPwdSave.removeClass("m_disabled")},updatePwd:function(){var e=this;return e.verifyForm()?void this.formPwd.submit():null},resetInput:function(){$("form").find("input").val("")},initAjaxForm:function(){var e=this;this.pwdAjaxForm=s.classInstanceAjaxForm($("#formPwd"),{success:function(t){var i=this.contentWindow,n=(i.location,decodeURIComponent(i.location.search)),a=o.parseSearch(n);a=a.json,a&&1==a.error?r.showError(a.message):(e.resetInput(),r.showOK("密码修改成功!"))},failure:function(e){r.showError("密码修改失败!")}}),this.pwdAjaxForm.setIframeState(!0)}});e.exports=l},function(e,t){"use strict";function i(){}i.prototype.save=function(e,t,i){$.ajax("http://i.yinyuetai.com/i/profile/update-password",{method:"POST",data:e,success:function(e){t&&t(e)},error:function(e){i&&i(e)}})},e.exports=i},function(e,t){e.exports='<form id="formPwd" action="http://i.yinyuetai.com/i/profile/update-password" method="post">\r\n    <ul>\r\n        <li class="Inp_Pc_name">\r\n            <span class="fl PiTitle"><i>*</i>旧密码：</span>\r\n            <div class="fl">\r\n                <input id="txtOldPwd" name="oldPassword" placeholder="请输入旧密码" type="password">\r\n            </div>\r\n        </li>\r\n        <li class="Inp_Pc_name">\r\n            <span class="fl PiTitle"><i>*</i>新密码：</span>\r\n            <div class="fl">\r\n                <input id="txtNewPwd" name="newPassword" placeholder="请输入新密码" type="password">\r\n            </div>\r\n        </li>\r\n        <li class="Inp_Pc_name">\r\n            <span class="fl PiTitle"><i>*</i>确认新密码：</span>\r\n            <div class="fl">\r\n                <input id="txtConfirmPwd" name="newPasswordRepeat" placeholder="请再次输入新密码" type="password">\r\n            </div>\r\n        </li>\r\n        <li class="save m_disabled" id="btnPwdSave">\r\n            保存\r\n        </li>\r\n    </ul>\r\n</form>\r\n'},function(e,t,i){"use strict";var n=i(10),a=i(79),s=i(83),r=i(92),o=i(34),l=i(19),c=i(20),d=n.extend({el:"#pageContent",rawLoader:function(){return i(95)},events:{"click #tab-menu-ctrl>li":"menuChanged","click #liveState>li":"liveStateChanged","click #profileSate>li":"profileStateChanged"},beforeMount:function(){},afterMount:function(){this.noListDOM=this.$el.find("#noOpenListLive"),this.historyDOM=this.$el.find("#historyListLive"),this.liveStateDOMS=this.$el.find("#liveState>li"),this.editProfileDOM=this.$el.find("#editProfile"),this.accountSettingsDOM=this.$el.find("#accountSettings"),this.profileStateDOMS=this.$el.find("#profileSate>li"),this.updatePasswordDom=this.$el.find("#updatePassword")},ready:function(){this.createLiveView=new a,this.noopenListView=new s,this.historyListView=new r;var e=c.parse(window.location.href).query.view||"";this.changeView(e)},menuChanged:function(e){var t=$(e.target);"SPAN"==e.target.tagName&&(t=t.parent()),t&&("signout"===t.attr("data-panel")?o.show({content:"是否退出",okFn:function(){l.remove("imSig"),l.set("signout",1),window.location.href=window.location.origin+"/web/login.html"}}):(t.parent().children("li").removeClass("on"),t.addClass("on"),$(".tab-panel").hide(),$("#"+t.attr("data-panel")).show()))},liveStateChanged:function(e){var t=$(e.currentTarget),i=t.data("state");this.liveStateDOMS.removeClass("on"),t.addClass("on"),~~i?(this.noListDOM.hide(),this.historyDOM.show()):(this.historyDOM.hide(),this.noListDOM.show())},profileStateChanged:function(e){var t=$(e.currentTarget),i=t.data("state");this.profileStateDOMS.removeClass("on"),t.addClass("on"),~~i?(this.editProfileDOM.hide(),this.updatePasswordDom.show()):(this.editProfileDOM.show(),this.updatePasswordDom.hide())},changeView:function(e){"history"==e&&this.liveStateChanged({currentTarget:$(".myLiveControls").find('[data-state="1"]')})}});e.exports=d},function(e,t,i){"use strict";var n,a=i(10),s=i(49),r=i(21),o=r.sharedInstanceUserModel(),l=i(80),c=i(81),d=i(43),h=a.extend({el:"#createLiveVideo",rawLoader:function(){return i(82)},events:{"click #createVideo":"createVideoHandler","click .select":"dateTimeToggle","click .selectDate li":"selectDateHandler","keyup #inputActorName":"actorNameHandler","blur #inputActorName":"actorNameBlurHandler","click #selectorActor li":"selectorActorHandler","change #inputActorName":""},beforeMount:function(){this.actorName=null,this.videoName=null,this.createClick=!1,this.createLock=!0,this.dateTime=new s,this.mapKey=["year","month","day","hours","minutes"],this.createData={deviceinfo:'{"aid":"30001001"}',roomName:"",roomDesc:"",artistId:"",artistName:"",liveTime:0,access_token:"web-"+o.getToken()},this.createDate={}},afterMount:function(){this.selectorActor=this.$el.find("#selectorActor"),this.actorTemp=this.$el.find("#selectorActorTemp").html(),this.createVideo=this.$el.find("#createVideo"),this.actorName=this.$el.find("#inputActorName"),this.videoName=this.$el.find("#liveVideoName"),this.liveTime=this.$el.find("#liveTime"),this.liveTimeTemp=this.$el.find("#liveTimeTemp").html(),this.cellsTemp=this.$el.find("#cellsTemp").html(),this.hours=this.compileHTML(this.cellsTemp,{cells:this.eachMost(0,23)}),this.minutes=this.compileHTML(this.cellsTemp,{cells:this.eachMost(0,59)})},ready:function(){this.artistModel=new c,this.createModel=new l,this.initRender(),this.initListener()},initRender:function(){var e=this.dateDataStructure(),t=this.compileHTML(this.liveTimeTemp,{items:e});this.liveTime.html(t),this.liveTimeUl=this.liveTime.find(".select>ul"),this.liveTimeSpan=this.liveTime.find(".date"),this.liveLength=this.liveTimeUl.length-1},initListener:function(){var e=this;n=setInterval(function(){var t=e.actorName.val(),i=e.videoName.val();t&&i?(e.createVideo.removeClass("m_disabled"),e.createClick=!0):(t||i)&&(e.createVideo.addClass("m_disabled"),e.createClick=!1)},0)},dateDataStructure:function(){for(var e=[],t=0,i=this.mapKey.length;i>t;t++){var n=this.mapKey[t],a={tag:n,cur:this.dateTime.$get(n),style:""};switch(this.createDate[n]=a.cur,n){case"year":a.cells=this.dateTime.ceilYear(0),a.name="年";break;case"month":a.cells=this.dateTime.downMonth(),a.name="月";break;case"day":a.cells=this.dateTime.downDay(),a.name="日",a.division=!0;break;case"hours":a.style="margin-left: 68px;",a.cells=this.dateTime.downHours(),a.name="时";break;default:a.cells=this.dateTime.downMinutes(),a.name="分"}e.push(a)}return e},dateTimeToggle:function(e){e.stopPropagation();var t=$(e.currentTarget),i=~~t.data("index"),n=$(this.liveTimeUl[i]);n.toggle()},selectDateHandler:function(e){var t=$(e.currentTarget),i=t.text(),n=t.parent(),a=~~n.data("index"),s=n.data("tag"),r=$(this.liveTimeSpan[a]),o=r.text();if(o!==i){i=~~i,r.text(i),this.createDate[s]=i;var l,c,d,h,u=a+1,p=1,f=0;for("month"===s&&i===this.dateTime.$get("month")&&(this.dateTime.setCurNewDate(),d=!0);u<=this.liveLength;u++){var m=$(this.liveTimeUl[u]),v=$(this.liveTimeSpan[u]),g=m.data("tag");if(h=null,d)h=this.dateTime.down(g),l=this.compileHTML(this.cellsTemp,{cells:h}),v.text(h[0]),m.html(l);else switch(g){case"day":c=this.dateTime.getCountDays(i),l=this.compileHTML(this.cellsTemp,{cells:this.eachMost(1,c)}),v.text(p),m.html(l);break;case"hours":m.html(this.hours),v.text(f);break;default:m.html(this.minutes),v.text(f)}}}},eachMost:function(e,t){for(var i=[];t>=e;e++)i.push(e);return i},actorNameHandler:function(e){var t=$(e.currentTarget),i=$.trim(t.val());if(!i)return void this.selectorActor.empty();var n=this;this.artistModel.executeJSONP({keyword:i,deviceinfo:'{"aid":"30001001"}'},function(e){var t=e.data.list;n.selectorActor.html(n.compileHTML(n.actorTemp,{items:t})),n.selectorActor.show()},function(e){d.showError("输入有误")})},actorNameBlurHandler:function(e){},selectorActorHandler:function(e){var t=$(e.currentTarget),i=t.text();this.createData.artistId=~~t.attr("data-id"),this.actorName.val(i),this.selectorActor.hide()},createVideoHandler:function(e){var t=this;if(this.createClick&&this.createLock){clearInterval(n);var i=new Date,a=i.getTime()+36e5;if(this.createLock=!1,this.createData.roomName=this.videoName.val(),this.createData.artistName=this.actorName.val(),this.createData.liveTime=this.dateTime.getTime(this.createDate),this.createData.liveTime<a)return d.showError("直播时间至少为一小时之后"),this.createLock=!0,void t.initListener();this.createModel.executeJSONP(this.createData,function(e){var i=~~e.code;e.data;i?(d.showError(e.msg),t.createLock=!0,t.initListener()):(d.showOK("创建成功"),window.location.reload())},function(e){d.showError("创建失败"),t.createLock=!0,t.initListener()})}}});e.exports=h},function(e,t,i){"use strict";var n=i(18),a=n.extend({url:"{{url_prefix}}/room/create.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&roomName={{roomName}}&roomDesc={{roomDesc}}&artistId={{artistId}}&liveTime={{liveTime}}",beforeEmit:function(e){}});e.exports=a},function(e,t,i){"use strict";var n=i(18),a=n.extend({url:"{{url_prefix}}/search/artist_autocomplete.json?deviceinfo={{deviceinfo}}&keyword={{keyword}}&offset=100",beforeEmit:function(e){}});e.exports=a},function(e,t){e.exports='<ul>\r\n	<li class="Inp_name">\r\n		<span>*</span>直播名称：\r\n		<input type="text" maxlength="15" placeholder="输入直播名" id="liveVideoName"><i>限15个字以内</i>\r\n	</li>\r\n	<li class="Inp_artist">\r\n		<span>*</span>选择艺人：\r\n		<input type="text" placeholder="输入文字" id="inputActorName">\r\n		<ul id="selectorActor">\r\n			 <script type="text/html" id="selectorActorTemp">\r\n				{{each items as item}}\r\n				      <li data-id="{{item[0]}}">{{item[1]}}</li>\r\n				{{/each}}\r\n			 </script>\r\n		</ul>\r\n	</li>\r\n	<li class="Inp_time">\r\n		<div class="tit"><span class="redX">*</span>直播时间：</div>\r\n		<div id="liveTime">\r\n			<script type="text/html" id="liveTimeTemp">\r\n				{{each items as item i}}\r\n					<div class="select" style="{{item.style}}" data-index="{{i}}">\r\n						<span class="date">{{item.cur}}</span>\r\n						<img src="../img/select-ico.jpg" alt="">\r\n						<ul class="selectDate" data-index="{{i}}" data-tag="{{item.tag}}">\r\n							{{each item.cells as cell}}\r\n								<li>{{cell}}</li>\r\n							{{/each}}\r\n						</ul>\r\n					</div>\r\n					<em>{{item.name}}</em>\r\n					{{if item.division}}\r\n						<br/>\r\n					{{/if}}\r\n				{{/each}}\r\n			</script>\r\n			<script type="text/html" id="cellsTemp">\r\n				{{each cells as cell}}\r\n					<li>{{cell}}</li>\r\n				{{/each}}\r\n			</script>\r\n		</div>\r\n\r\n	</li>\r\n	<div class="submit m_disabled" id="createVideo">创建</div>\r\n</ul>\r\n'},function(e,t,i){"use strict";var n=i(10),a=i(84),s=i(85),r=i(86),o=i(87),l=i(88),c=i(43),d=i(34),h=i(21),u=i(39),p=i(49),f=h.sharedInstanceUserModel(),m=new p,v=n.extend({el:"#noOpenContent",events:{"click li":"checkLiveVideoHandler","click .uploadImage":"editCoverImageHandler","click .copy-video-url":"copyUrlHandler","click .copy-video-name":"copyNameHandler"},rawLoader:function(){},beforeMount:function(){var e=f.getToken();this.listTemp=i(90),this.liTemp=i(91),this.noOpenParameter={deviceinfo:'{"aid":"30001001"}',order:"time",offset:0,size:6,access_token:"web-"+e},this.removeParameter={deviceinfo:'{"aid":"30001001"}',roomId:"",access_token:"web-"+e},this.releaseParameter={deviceinfo:'{"aid":"30001001"}',roomId:"",access_token:"web-"+e},this.saveCoverParameter={deviceinfo:'{"aid":"30001001"}',access_token:"web-"+e,roomId:"",posterUrl:""},this.removeLock=!0,this.releaseLock=!0,this.liCache=null,this.imagePath="",this.upload=null,this.singleLiDOM=null,this.uploadState=!1,this.noOpenModel=new a,this.releaseModel=new s,this.removeModel=new r,this.saveCoverModel=new o},afterMount:function(){},ready:function(){var e=this,t={width:580,height:341,isRemoveAfterHide:!1,isAutoShow:!1,mainClass:"shadow_screen_x",
closeClass:"editor_bg_close_x",closeText:"X",title:"封面设置",ctrlData:{cmd:[{saveOriginal:1,op:"save",plan:"avatar",belongId:"20634338",srcImg:"img"}],redirect:window.location.origin+"/cross-url/upload.html"},uploadFileSuccess:function(t){e.uploadImageHandler(t),e.uploadState=!0},saveFile:function(){e.uploadState?e.saveCoverImage():c.showTip("正在上传，请等待")}};this.upload=new u(t),this.noOpenModel.executeJSONP(this.noOpenParameter,function(t){var i=t.data,n=i.roomList,a=Math.ceil(i.totalCount/e.noOpenParameter.size);a>1&&e.initPageBox({offset:e.noOpenParameter.offset,size:e.noOpenParameter.size,count:a}),e.initRender(n)},function(){c.showError("获取未直播列表：第1页失败")})},initPageBox:function(e){var t=this;this.pageBoxView=new l({id:"#noOpenPageBox",props:e,listModel:this.noOpenModel,listRender:function(e){var i=e.data,n=i.roomList;t.initRender(n)}})},initRender:function(e){var t="";t=e.length?this.compileHTML(this.listTemp,{items:e}):"<h1>暂无数据</h1>",this.$el.html(t),this.liCache=null,this.liCache={};for(var i=this.$el.find("li"),n=0,a=i.length;a>n;n++){var s=$(i[n]),r=s.attr("data-key");this.liCache[r]=s}},checkLiveVideoHandler:function(e){var t=this,i=$(e.currentTarget),n=$(e.target),a=n.data("state"),s=i.attr("data-id"),r=n.parents("li").attr("data-img");switch(a){case 2:t.publishLiveShow(s,n,r);break;case 3:this.removeLock&&d.show({content:"是否确认删除",okFn:function(){t.removeLock=!1,t.removeParameter.roomId=s,t.removeModel.executeJSONP(t.removeParameter,function(){t.removeLock=!0,c.showOK("删除成功"),i.remove()},function(e){t.removeLock=!0,c.showError("删除失败")})}})}},isTooLate:function(e){var t=new Date,i=e-t.getTime(),n=Number(p.difference(Math.abs(i)).hours);return 0>i&&n>=1},publishLiveShow:function(e,t,i){var n=this,a=t.parents("li").attr("data-liveTime");return n.isTooLate(a)?(msgBox.showTip("您已经迟到超过一小时，无法再进行本场直播了"),null):void("disable"!==t.attr("class")&&(this.releaseLock&&i?(this.releaseLock=!1,this.releaseParameter.roomId=e,this.releaseModel.executeJSONP(this.releaseParameter,function(e){n.releaseLock=!0,t.addClass("disable"),c.showOK("发布成功");var i=e.data;i.liCacheKey=i.id+"-"+i.streamName,i.liveVideoTime=n.forMatterDate(i.liveTime),i.lookUrl="/web/anchor.html?roomId="+i.id,n.liRender(i)},function(e){n.releaseLock=!0,c.showError("发布失败")})):c.showError("发布失败，请上传封面")))},editCoverImageHandler:function(e){var t=$(e.currentTarget),i=null,n=t.attr("data-posterpic");if(this.upload){if(this.currentLiveItem=$(t.parents("li")),this.singleLiDOM=t.parent(),this.saveCoverParameter.roomId=this.singleLiDOM.data("id"),this.upload.emptyValue(),n){var a=t.find(".cover-image");i={breviaryUrl:a.attr("src"),inputText:"编辑图片"}}this.upload.show(i)}},uploadImageHandler:function(e){var t=this.upload.parseErrorMsg(e);if(1==t){var i=e.images;this.imagePath=i[0].path,this.currentLiveItem&&this.currentLiveItem.attr("data-img",i[0].path||"")}else c.showTip(t)},saveCoverImage:function(){var e=this;this.saveCoverParameter.posterUrl=this.imagePath,this.saveCoverModel.executeJSONP(this.saveCoverParameter,function(t){var i=~~t.code;if(!i){var n=e.singleLiDOM.find(".cover-image");n.attr("src",e.imagePath),e.singleLiDOM=null,c.showOK("保存成功"),e.upload.hide(),e.uploadState=!1}},function(e){c.showError("保存失败")})},forMatterDate:function(e){m.setCurNewDate(e);var t=m.$get("year"),i=m.$get("month"),n=m.$get("day"),a=m.$get("hours"),s=10>a?"0"+a:a,r=m.$get("minutes"),o=10>r?"0"+r:r;return t+"/"+i+"/"+n+" "+s+":"+o},liRender:function(e){var t=this.compileHTML(this.liTemp,{item:e}),i=this.liCache[e.liCacheKey];i.html(t)},copyUrlHandler:function(e){e.preventDefault();var t=$(e.currentTarget),i=t.attr("data-value");return i.length?void this.clipboard(i):void c.showTip("原因：需要发布才会存在视屏地址")},copyNameHandler:function(e){e.preventDefault();var t=$(e.currentTarget),i=t.attr("data-value");this.clipboard(i)},clipboard:function(e){window.clipboardData?(window.clipboardData.clearData("text"),window.clipboardData.setData("text",e),c.showOK("复制成功")):c.showTip("原因：你浏览器的js不支持剪贴板，无法调用")}});e.exports=v},function(e,t,i){"use strict";var n=i(18),a=i(49),s=new a,r=n.extend({url:"{{url_prefix}}/room/no_open_list.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&order={{order}}&offset={{offset}}&size={{size}}",beforeEmit:function(e){},formatter:function(e){var t=~~e.code;if(t)return e;for(var i=e.data,n=i.roomList,a=n.length;a--;){var r=n[a],o=r.liveTime;s.setCurNewDate(o);var l=s.$get("year"),c=s.$get("month"),d=s.$get("day"),h=s.$get("hours"),u=10>h?"0"+h:h,p=s.$get("minutes"),f=10>p?"0"+p:p;r.liveVideoTime=l+"/"+c+"/"+d+" "+u+":"+f,r.lookUrl="/web/anchor.html?roomId="+r.id,r.liCacheKey=r.id+"-"+r.streamName}return e}}),o=null;r.sharedInstanceNoOpenListModel=function(){return o||(o=new r),o},e.exports=r},function(e,t,i){"use strict";var n=i(18),a=n.extend({url:"{{url_prefix}}/room/show.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&roomId={{roomId}}",beforeEmit:function(e){}});e.exports=a},function(e,t,i){"use strict";var n=i(18),a=n.extend({url:"{{url_prefix}}/room/del.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&roomId={{roomId}}",beforeEmit:function(e){}});e.exports=a},function(e,t,i){"use strict";var n=i(18),a=n.extend({url:"{{url_prefix}}/room/pp_set.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&roomId={{roomId}}&posterUrl={{posterUrl}}",beforeEmit:function(e){}});e.exports=a},function(e,t,i){"use strict";var n='{{each items as item i}}<span class="{{if item == num }}now{{/if}}" data-page="{{item}}" data-indice="{{i}}">{{item}}</span>{{/each}}',a=i(10),s=i(21),r=i(43),o=s.sharedInstanceUserModel(),l=a.extend({clientRender:!1,events:{"click .pre":"preHandler","click .next":"nextHandler","click #nav span":"pageboxHandler"},beforeMount:function(){var e=this._ICEOptions.props;this.boxTemp=i(89),this.count=e.count,this.offset=e.offset,this.size=e.size,this.sectionBase=e.sectionBase||3,this.listModel=this._ICEOptions.listModel,this.listRender=this._ICEOptions.listRender,this.modelParameter={deviceinfo:'{"aid":"30001001"}',order:"",offset:0,size:this.size,access_token:"web-"+o.getToken()},this.omit=this.count>2,this.items=[];for(var t=0;t<this.count;t++)this.items.push(t+1);this.lock=!0,this.translation=0},afterMount:function(){},ready:function(){this._ICEinitEvent(),this.initRender()},initRender:function(){var e=this.items.concat();this.omit&&(e=e.splice(0,3));var t={count:this.count,omit:this.omit,items:e},i=this.compileHTML(this.boxTemp,t);this.$el.html(i),this.howPage=this.$el.find("#howPage"),this.nav=this.$el.find("#nav")},preHandler:function(e){var t=$(e.currentTarget);if(this.offset<=0)return void r.showTip("原因：已经翻到最前一页");var i=t.attr("data-state");this.initRequest(i)},nextHandler:function(e){var t=$(e.currentTarget);if(this.offset===this.count-1)return void r.showTip("原因：已经翻到最后一页");var i=t.attr("data-state");this.initRequest(i)},pageboxHandler:function(e){var t=$(e.currentTarget),i=~~t.attr("data-page");if(i-1!==this.offset){var n=this.nav.find("span");n.removeClass("now"),t.addClass("now");var a=~~t.text();this.offset=a-1,this.translation=~~t.attr("data-indice"),this.openRequest()}},initRequest:function(e){switch(e){case"1":0!==this.offset&&(this.offset--,this.sectionLogic(0));break;case"2":this.offset<=this.count-2&&(this.offset++,this.sectionLogic(1))}this.openRequest()},openRequest:function(){var e=this;this.lock&&(this.lock=!1,this.modelParameter.offset=(this.offset||0)*this.size,this.listModel.executeJSONP(this.modelParameter,function(t,i){e.lock=!0;var n=~~t.code;return n?void r.showError(t.msg):void e.listRender(t)},function(t){e.lock=!0,0!==e.offset&&e.offset--}))},sectionLogic:function(e){var t=this.sectionBase-1,i=this.offset+t,n=this.items.concat(),a=n[i];if(a<=n[n.length-1])this.translation=0,n=n.splice(this.offset,this.sectionBase),this.sectionRender(n,n[0]);else{if(!a){var s=this.offset?this.offset-1:this.offset;this.offset>this.count-2&&s&&--s;var r=n.splice(s,this.sectionBase);return this.translation=0,void this.sectionRender(r,this.offset+1)}if(this.translation>t)return;e?this.translation++:this.translation--,this.spans.removeClass("now");var o=this.spans[this.translation];$(o).addClass("now")}},sectionRender:function(e,t){var i=this.compileHTML(n,{items:e,num:t});this.nav.html(i),this.spans=this.nav.find("span")}});e.exports=l},function(e,t){e.exports='<span class="pre" data-state="1">&lt;</span>\r\n<div class="fl">\r\n	<div id="nav">\r\n		{{each items as item i}}\r\n			<span class="{{if i === 0}}now{{/if}}" data-page="{{item}}" data-indice="{{i}}">{{item}}</span>\r\n		{{/each}}\r\n	</div>\r\n</div>\r\n{{if omit}}\r\n	<span class="disabled">......</span>\r\n{{/if}}\r\n<span class="next" data-state="2">&gt;</span>\r\n<p>共<i id="howPage">{{count}}</i>页</p>\r\n'},function(e,t){e.exports='{{each items as item}}\r\n     <li  data-id="{{item.id}}" data-key="{{item.liCacheKey}}" data-img="{{item.posterPic}}" data-liveTime="{{item.liveTime}}">\r\n            <div class="uploadAd fl uploadImage" data-posterPic="{{if item.posterPic}}1{{/if}}">\r\n                   <img src="{{item.posterPic || \'../img/aP-list-ad.png\'}}" alt="" class="cover-image">\r\n            </div>\r\n            <dl class="preLiveMsg fl">\r\n                   <dt>{{item.roomName}}</dt>\r\n                   <dd>直播时间：<span>{{item.liveVideoTime}}</span></dd>\r\n                   <dd>\r\n                        <h4 class="tit">视频连接：</h4>\r\n                        <div>\r\n                                <span>{{item.livePushStreamUrl}}</span>\r\n                                <a href="" class="copy copy-video-url" data-value="{{item.livePushStreamUrl}}">复制</a>\r\n                        </div>\r\n                   <dd>\r\n                        <h4 class="tit">视频流：</h4>\r\n                        <div>\r\n                              <span>{{item.streamName}}</span>\r\n                              <a href="" class="copy copy-video-name" data-value="{{item.streamName}}">复制</a>\r\n                        </div>\r\n                  </dd>\r\n                   <dd class="ctl">\r\n                        <a href="{{item.lookUrl}}">查看</a>\r\n                        {{if item.status === 1}}\r\n                        	<span class="disable" data-state="2">已发布</span>\r\n                        {{else if item.status === 2}}\r\n                            <span class="disable">直播中</span>\r\n                        {{else }}\r\n                        	{{if item.status === 0}}\r\n                        		<span  data-state="2">发布</span>\r\n					        {{/if}}\r\n                        {{/if}}\r\n                        {{if item.status === 0}}\r\n                            <span data-state="3">删除</span>\r\n                        {{/if}}\r\n                   </dd>\r\n            </dl>\r\n     </li>\r\n{{/each}}\r\n'},function(e,t){e.exports='<div class="uploadAd fl uploadImage"data-posterPic="{{if item.posterPic}}1{{/if}}"  data-liveTime="{{item.liveTime}}">\r\n       <img src="{{item.posterPic|| \'../img/aP-list-ad.png\'}}" alt="" class="cover-image">\r\n</div>\r\n<dl class="preLiveMsg fl">\r\n       <dt>{{item.roomName}}</dt>\r\n       <dd>直播时间：<span>{{item.liveVideoTime}}</span></dd>\r\n       <dd>\r\n            <h4 class="tit">视频连接：</h4>\r\n            <div>\r\n                    <span>{{item.livePushStreamUrl}}</span>\r\n                    <a href="" class="copy copy-video-url" data-value="{{item.livePushStreamUrl}}">复制</a>\r\n            </div>\r\n       <dd>\r\n            <h4 class="tit">视频流：</h4>\r\n            <div>\r\n                  <span>{{item.streamName}}</span>\r\n                  <a href="" class="copy copy-video-name" data-value="{{item.streamName}}">复制</a>\r\n            </div>\r\n      </dd>\r\n       <dd class="ctl">\r\n            <a href="{{item.lookUrl}}">查看</a>\r\n            {{if item.status === 1}}\r\n            	<span class="disable" data-state="2">已发布</span>\r\n            {{else }}\r\n            	{{if item.status === 0}}\r\n            		<span  data-state="2">发布</span>\r\n			    {{/if}}\r\n            {{/if}}\r\n            {{if item.status === 0}}\r\n                <span data-state="3">删除</span>\r\n            {{/if}}\r\n       </dd>\r\n</dl>\r\n'},function(e,t,i){"use strict";var n=i(10),a=i(93),s=i(88),r=i(21),o=r.sharedInstanceUserModel(),l=n.extend({el:"#historyContent",events:{},rawLoader:function(){},beforeMount:function(){var e=o.getToken();this.listTemp=i(94),this.historyParameter={deviceinfo:'{"aid":"30001001"}',order:"time",offset:0,size:6,access_token:"web-"+e},this.historyModel=new a},afterMount:function(){},ready:function(){var e=this;this.historyModel.executeJSONP(this.historyParameter,function(t){var i=t.data,n=i.roomList||[],a=Math.ceil(i.totalCount/e.historyParameter.size);a>1&&e.initPageBox({offset:e.historyParameter.offset,size:e.historyParameter.size,count:a}),e.initRender(n)},function(e){})},initPageBox:function(e){var t=this;this.pageBoxView=new s({id:"#historyPageBox",props:e,listModel:this.historyModel,listRender:function(e){var i=e.data,n=i.roomList;t.initRender(n)}})},initRender:function(e){var t="";t=e.length?this.compileHTML(this.listTemp,{items:e}):"<h1>暂无数据</h1>",this.$el.html(t)}});e.exports=l},function(e,t,i){"use strict";var n=i(18),a=i(49),s=n.extend({url:"{{url_prefix}}/room/end_list.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&order={{order}}&offset={{offset}}&size={{size}}",beforeEmit:function(e){},formatter:function(e){var t=~~e.code;if(t)return e;for(var i=e.data,n=i.roomList,s=n.length;s--;){var r=n[s],o=a.difference(r.duration>0?r.duration:0);r.diff=o.hours+":"+o.minutes+":"+o.seconds}return e}});e.exports=s},function(e,t){e.exports='{{each items as item}}\r\n<li data-id="{{item.roomId}}">\r\n    <div class="uploadAd fl">\r\n        <a href="#">\r\n            <img src="{{item.posterPic}}" alt="">\r\n        </a>\r\n    </div>\r\n    <dl class="preLiveMsg fl">\r\n        <dt>{{item.roomName}}</dt>\r\n        <dd>\r\n            直播时间：<span class="date dark-color">2016/03/17 14:00</span>\r\n            时长：<span class="dark-color">{{item.diff}}</span>\r\n        </dd>\r\n        <dd class="popularity">\r\n            <img src="../img/easy.png" alt="">\r\n            <span>{{item.seen}}</span>\r\n            <img src="../img/yun.png" alt="">\r\n            <span>{{item.bulletCurtain}}</span>\r\n            <img src="../img/love.png" alt="">\r\n            <span>{{item.assemble}}</span>\r\n        </dd>\r\n        <!--<dd class="popularity-wrap">-->\r\n            <!--<div class="progress-wrap border-radius">-->\r\n                <!--<div style="width: 45%;" class="progress border-radius"></div>-->\r\n            <!--</div>-->\r\n        <!--</dd>-->\r\n        <dd class="pop">人气：<span>{{item.popularity}}</span></dd>\r\n    </dl>\r\n</li>\r\n{{/each}}'},function(e,t){e.exports='<ul id="tab-menu-ctrl" class="subnav1 fl" style="height: inherit;">\r\n       <li data-panel="tab-my-live" class="on">我的直播<span>&gt;</span></li>\r\n       <li data-panel="createLiveVideo">创建直播<span>&gt;</span></li>\r\n       <li data-panel="tabSetting">个人设置<span>&gt;</span></li>\r\n       <li data-panel="signout">退出<span>&gt;</span></li>\r\n</ul>\r\n<div class="anPc-list fl tab-panel-wraper">\r\n       <div id="tab-my-live" class="tab-panel myLiveBox show">\r\n              <ol class="myLiveControls clearfix" id="liveState">\r\n                     <li class="fl on" data-state="0">未开通</li>\r\n                     <li class="fl"  data-state="1">历史直播</li>\r\n              </ol>\r\n              <div class="Mylive">\r\n                     <div class="preLive show" id="noOpenListLive">\r\n                            <ul id="noOpenContent"></ul>\r\n                            <div class="page">\r\n                            		<div class="PageBox" id="noOpenPageBox"></div>\r\n                            </div>\r\n                     </div>\r\n                     <div class="liveHistory" id="historyListLive">\r\n                            <ul id="historyContent"></ul>\r\n                            <div class="page">\r\n                            		<div class="PageBox" id="historyPageBox"></div>\r\n                            </div>\r\n                     </div>\r\n              </div>\r\n       </div>\r\n       <div  class="tab-panel creatLive" id="createLiveVideo">\r\n       </div>\r\n       <div  class="tab-panel setting" id="tabSetting">\r\n              <ol class="setContrl clearfix" id="profileSate">\r\n                     <li class="fl on" data-state="0">个人资料</li>\r\n                     <li class="fl" data-state="1">修改密码</li>\r\n              </ol>\r\n              <div class="set_Con">\r\n                     <div class="personInfo show" id="editProfile">\r\n\r\n                     </div>\r\n                     <div class="modifyPwd" id="updatePassword">\r\n\r\n                     </div>\r\n\r\n              </div>\r\n       </div>\r\n       <!-- <div class="signOut"></div> -->\r\n</div>\r\n'},function(e,t){e.exports='<!--编辑背景图片-->\r\n<div class="title">\r\n	<span class="editorBg_btn" id="editBgBtn">编辑背景</span>\r\n</div>\r\n<div class="contentBox">\r\n	<!--profile-->\r\n	<div class="anchorMsg_con clearfix" id="settingProfile"></div>\r\n	<!-- 页面主体部分 -->\r\n	<div class="content clearfix" id="pageContent"></div>\r\n</div>\r\n'},function(e,t){}]);