/**
 * @project yinyuetai_pc_live_video
 * @description 音悦台直播PC版
 * @version v1.0.0
 * @time 2016-4-6   15:55:43
 * @author YYT
 * @copy http://www.yinyuetai.com
 */
webpackJsonp([1],[function(t,e,i){$(function(){var t=i(71);new t,i(100)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){var n={},s={title:"消息",content:"",okFn:null,cancelFn:null,okBtn:!0,cancelBtn:!0};n.init=function(t){var e=_.template(this.getHTML()),i=e(t);this.remove(),this.bindEvent(i,t.okFn,t.cancelFn)},n.remove=function(){var t=$("#UIConfigWrap");t&&t.length>=1&&t.remove()},n.getHTML=function(){return i(37)},n.bindEvent=function(t,e,i){var n=this;t=$(t),t.find("#UIConfirmOk").on("click",function(t){return t.preventDefault(),e&&e(),n.remove(),!1}),t.find(".UIConfirmClose").on("click",function(t){return t.preventDefault(),i&&i(),n.remove(),!1}),t.find("#UIConfirmOk").on("click",function(t){return t.preventDefault(),n.remove(),!1}),$("body").append(t)},n.show=function(t){var e=_.extend(s,t);this.init(e)},n.close=function(){this.remove()},t.exports={show:function(t){n.show(t)},close:function(){n.close()}}},function(t,e){t.exports='<div id="UIConfigWrap" class="shadow_screen">\n    <div class="shadow"></div>\n    <div class="edit_annmoucement_con" style="margin-bottom: 16px; width: 400px;margin-left:-200px;">\n        <h2 class="edit_title"><span id="UIConfirmTitle"><%=title%></span> <span class="close UIConfirmClose">X</span></h2>\n        <div class="editCon" style="">\n            <div class="content" style="padding:16px; font-size: 14px;"><%=content%></div>\n            <p class="btn-wrap" style="">\n                <a style="display: <%= cancelBtn?\'inline-block\':\'none\'%>;" href="javascript:;" class="cancel UIConfirmClose">取消</a>\n                <a id="UIConfirmOk" href="javascript:;" class="submit">确定</a>\n            </p>\n        </div>\n    </div>\n</div>'},,function(t,e,i){"use strict";var n=i(22),s=(n.sharedInstanceUserModel(),i(18)),a=s.sharedInstanceIMModel();t.exports={onlyAnchorUse:function(t){a.fetchIMUserSig(function(e){e.anchor||(window.location.href=t||"/index.html")},function(){window.location.href="/index.html"})}}},,,function(t,e,i){"use strict";var n=i(43),s=i(23),a=i(44),o=function(t){var e=this;this.options=t,this.dialog=s.classInstanceDialog(n,t),this.helper=new a({ctrlData:this.options.ctrlData,id:"#"+this.dialog.id}),this.helper.on("uploadFileSuccess",function(t){"function"==typeof e.options.uploadFileSuccess&&e.options.uploadFileSuccess(t)}),this.helper.on("saveFile",function(){"function"==typeof e.options.saveFile&&e.options.saveFile()})};o.prototype.show=function(t){this.helper&&t&&this.helper.trigger("successBreviary",t),this.dialog.show()},o.prototype.hide=function(){this.dialog.hide()},o.prototype.emptyValue=function(){this.helper&&this.helper.emptyValue()},o.prototype.parseErrorMsg=function(t){if(t&&"SUCCESS"==t.state)return!0;var e=1*t.errCode||0;switch(e){case 29:return"上传的文件太大了,请重新上传";case 31:return"请上传JPGE,JPG,PNG,GIF等格式的图片文件"}return"文件上传失败,请重新上传"};var r=null;o.sharedInstanceUploadFileDialog=function(t){return r||(r=new o(t)),r},t.exports=o},function(t,e){t.exports='<div class="shadow"></div>\n<div class="edit_Bg_form_x" id="uploadFileDialog">\n	<h2 class="edit_title">\n		<span class="upload-title">背景图设置</span>\n		<span class="upload-status upload-image-state"></span>\n	</h2>\n	<div class="formCon clearfix">\n		<div class="imgBox fl">\n			<img src="" alt="" width="100%" height="100%"  style="display: none;" class="imgboxFile">\n		</div>\n		<div class="formBox fl">\n			<div class="pseudo-uploadBtn">\n				<span class="input-text">上传图片</span>\n				<form class="upload-form">\n\n				</form>\n			</div>\n			<p>支持5M以内的gif、jpg、jpge、png图片上传</p>\n			<div class="submit">保存</div>\n		</div>\n	</div>\n</div>\n'},function(t,e,i){"use strict";var n=i(11),s=i(45),a="正在上传",o="上传完成!",r=i(46),l=window.location,c=n.extend({rawLoader:function(){},events:{"click .submit":"saveHandler","change .upload-file":"changeFile"},beforeMount:function(){},afterMount:function(){this.formDOM=this.$el.find(".upload-form"),this.imgSrcDOM=this.$el.find(".imgboxFile"),this.imageStateDOM=this.$el.find(".upload-image-state"),this.inputTextDOM=this.$el.find(".input-text")},ready:function(t){var e=t.ctrlData||{cmd:[{saveOriginal:1,op:"save",plan:"avatar",belongId:"20634338",srcImg:"img"}],redirect:l.origin+"/web/upload.html"},i=this;this.upload=s.classInstanceUploadFile({el:this.formDOM,url:"http://image.yinyuetai.com/edit",data:e,filename:"img",className:"file",success:function(t){i.imageStateDOM.html(o),i.previewImage(t),i.trigger("uploadFileSuccess",t)},failure:function(){r.showError("上传失败")}}),this.on("successBreviary",function(t){this.successBreviary(t)})},successBreviary:function(t){this.emptyValue(),t.breviaryUrl&&(this.imgSrcDOM.attr("src",t.breviaryUrl),this.imgSrcDOM.show()),t.inputText&&this.inputTextDOM.text(t.inputText)},saveHandler:function(t){this.trigger("saveFile")},changeFile:function(t){this.imageStateDOM.html(a),this.upload.submit()},previewImage:function(t){var e=t.images;if(e&&e.length>0){var i=e[0].path;this.imgSrcDOM.attr("src",i),this.imgSrcDOM.show()}},emptyValue:function(){this.imageStateDOM.html(""),this.imgSrcDOM.hide(),this.inputTextDOM.text("上传图片")}}),d=null;c.sharedInstanceUploadFileDialog=function(t){return d||(d=new c(t)),d},c.fetchDialogTemplate=function(){return i(43)},t.exports=c},function(t,e,i){(function(e){"use strict";!function(i){"object"==typeof self&&self.self==self&&self||"object"==typeof e&&e.global==e&&e;t.exports=i()}(function(){var t=999,e=window,n=e.ICEPlugs||{},s=n.url;s||(s=i(21));var a=n.tools;a||(a=i(16));var o=n.AjaxForm;o||(o=i(28));var r=null,l=function(e){var i=this;return this.$el="string"==typeof e.el?$(e.el):e.el,this.uid="UploadFile"+t++,this.options=e,this._data=e.data||{},this._filename=e.filename||"image",this._success=e.success,this._before=e.before,this._failure=e.failure,this._url=e.url,this._url?(this._init(),void(this.ajaxForm=o.classInstanceAjaxForm(this.$el,{type:"img",success:function(){var t=this.contentWindow,e=(t.location,decodeURIComponent(t.location.search)),n=s.parseSearch(e);"function"==typeof i._success&&i._success.call(this,n)},failure:function(){"function"==typeof i._failure&&i._failure.call(this)}}))):void console.warn("配置上传URL")};return l.prototype._init=function(){this._createElement()},l.prototype._createElement=function(){var t="";for(var e in this._data){var i=this._data[e],n=a.toType(i);"[object Object]"!==n&&"[object Array]"!==n||(i=JSON.stringify(i)),t+='<input type="hidden" name="'+e+"\" value='"+i+"'/>"}t+='<input type="file" class="opacity0 upload-file '+this.options.className+'" name="'+this._filename+'"  />',this.$el.attr("method","POST"),this.$el.attr("action",this._url),this.$el.attr("enctype","multipart/form-data"),this.$el.append(t)},l.prototype.submit=function(){this.ajaxForm.setIframeState(!0),"function"==typeof this._before&&this._before(),this.$el.submit()},l.sharedInstanceUploadFile=function(t){return r||(r=new l(t)),r},l.classInstanceUploadFile=function(t){return new l(t)},l.prototype.parseErrorMsg=function(t){if(t&&"SUCCESS"==t.state)return!0;var e=1*t.errCode||0;switch(e){case 29:return"上传的文件太大了,请重新上传";case 31:return"请上传JPGE,JPG,PNG,GIF等格式的图片文件"}return"文件上传失败,请重新上传"},l})}).call(e,function(){return this}())},,,,,,,function(t,e,i){(function(e){"use strict";!function(i){"object"==typeof self&&self.self==self&&self||"object"==typeof e&&e.global==e&&e;t.exports=i()}(function(){var t=function(t){this.temp=new Date,this.setCurNewDate(t)};t.prototype.changeYear=function(t){this.temp.setFullYear(t)},t.prototype.getCountDays=function(t){return this.temp.setMonth(t),this.temp.setDate(0),this.temp.getDate()},t.prototype.$get=function(t){return this.attrs[t]},t.prototype.ceilYear=function(t){t=~~t;for(var e=0,i=this.$get("year"),n=[];t>=e;e++)n.push(i),i+=1;return n},t.prototype._downDisplacement=function(t){var e,i=this.$get(t),n=[];switch(t){case"month":e=12;break;case"day":e=this.getCountDays(this.$get("month"));break;case"hours":e=23;break;default:e=59}for(;e>=i;i++)n.push(i);return n},t.prototype.downMonth=function(){return this._downDisplacement("month")},t.prototype.downDay=function(){return this._downDisplacement("day")},t.prototype.downHours=function(){return this._downDisplacement("hours")},t.prototype.downMinutes=function(){return this._downDisplacement("minutes")},t.prototype.down=function(t){return this._downDisplacement(t)},t.prototype.getTime=function(t){var e="",i=t.month<10?"0"+t.month:t.month,n=t.day<10?"0"+t.day:t.day,s=t.hours<10?"0"+t.hours:t.hours,a=t.minutes<10?"0"+t.minutes:t.minutes;return e+=t.year+"-"+i+"-"+n+" ",e+=s+":"+a+":00",new Date(e.replace(/-/g,"/")).getTime()},t.prototype.setCurNewDate=function(t){this.date=null,this.date=t?new Date(t):new Date,this._setAttrs()},t.prototype._setAttrs=function(){this.attrs=null,this.attrs={year:this.date.getFullYear(),month:this.date.getMonth()+1,day:this.date.getDate(),hours:this.date.getHours(),minutes:this.date.getMinutes()}},t.difference=function(t){var e={},i=t%864e5,n=Math.floor(i/36e5);e.hours=10>n?"0"+n:n;var s=i%36e5,a=Math.floor(s/6e4);e.minutes=10>a?"0"+a:a;var o=s%6e4,r=Math.floor(o/1e3);return e.seconds=10>r?"0"+r:r,e};var e=null;return t.sharedInstanceDateTime=function(){return e||(e=new t),e},t}),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t}}).call(e,function(){return this}())},,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(11),s=i(22),a=i(64),o=i(18),r=i(72),l=i(20),c=i(73),d=i(75),h=i(78),u=i(81),p=(i(23),i(42)),m=o.sharedInstanceIMModel(),f=s.sharedInstanceUserModel(),v=i(46),g=i(39),w=n.extend({el:"#settingContent",events:{"click #editBgBtn":"editBgHandler"},rawLoader:function(){return i(99)},beforeMount:function(){g.onlyAnchorUse(),this.topbarView=new a,this.isLogined=!1,this.upload=null,this.bgTheme=null,this.anchorSig=null,this.updateBgParameter={deviceinfo:'{"aid":"30001001"}'},this.tempImg=null,this.saveLock=!0,this.uploadSate=!1,this.updateBgModel=new r},afterMount:function(){this.profileBg=$("#profileBg")},ready:function(){var t=this;f.isLogined()?this.fetchIMUserSig():(l.remove("imSig"),l.set("signout",1),window.location.href="/web/login.html",this.topbarView.on("logined",function(){t.fetchIMUserSig()}))},initRender:function(){var t=this,e={width:580,height:341,isRemoveAfterHide:!1,isAutoShow:!1,mainClass:"shadow_screen_x",closeClass:"editor_bg_close_x",closeText:"X",title:"背景设置",ctrlData:{cmd:[{saveOriginal:1,op:"save",plan:"avatar",belongId:"20634338",srcImg:"img"}],redirect:"http://"+window.location.host+"/cross-url/upload.html"},uploadFileSuccess:function(e){var i=t.upload.parseErrorMsg(e);1==i?(t.uploadSate=!0,t.uploadSuccess(e)):v.showTip(i)},saveFile:function(){t.uploadSate?t.saveFile():v.showError("正在上传，请等待")}};this.upload=new p(e),this.isLogined=!0,this.profileView=new c,this.pageContentView=new u,this.editProfileView=new d,this.updatePasswordView=new h},fetchIMUserSig:function(){var t=this;this.updateBgParameter.access_token="web-"+f.getToken(),m.fetchIMUserSig(function(e){e.anchor?(t.anchorSig=e,t.bgTheme=e.anchor.bgTheme,t.setPageBgimg(e.anchor.bgTheme),t.initRender()):l.remove("imSig")},function(t){v.showError("获取签名错误")})},editBgHandler:function(t){if(this.isLogined){var e=null;this.anchorBg&&(e={inputText:"编辑背景",breviaryUrl:this.anchorBg}),this.upload.emptyValue(),this.upload.show(e)}else v.showError("未登录或获取签名失败")},uploadSuccess:function(t){var e=t.images,i=e[0].path;this.tempImg=i},saveFile:function(){var t=this;this.saveLock&&(this.saveLock=!1,this.bgTheme=this.tempImg,this.updateBgParameter.bgTheme=this.bgTheme,this.updateBgModel.executeJSONP(this.updateBgParameter,function(e){var i=e.code;~~i?v.showError(e.msg):(t.saveLock=!0,t.setPageBgimg(e.data.bgTheme),t.upload.hide(),m.updateIMUserSig())},function(e){t.saveLock=!0,v.showError("保存背景图出错")}))},setPageBgimg:function(t){t&&this.profileBg.css("background","url("+t+")")}});t.exports=w},function(t,e,i){"use strict";var n=i(19),s=n.extend({url:"{{url_prefix}}/user/bgtheme_update.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&bgTheme={{bgTheme}}",beforeEmit:function(t){}});t.exports=s},function(t,e,i){"use strict";var n=i(11),s=i(74),a=i(18),o=a.sharedInstanceIMModel(),r=n.extend({el:"#settingProfile",events:{},rawLoader:function(){},beforeMount:function(){this.data={nickName:o.$get("data.nickName"),bigheadImg:o.$get("data.largeAvatar"),anchor:o.$get("data.anchor")}},afterMount:function(){this.elements={}},ready:function(){this.initRender(),this.defineEventInterface()},initRender:function(){var t=this.$el,e=this.compileHTML(s,this.data);this.$el.html(e),this.elements.nickName=t.find("#nickName"),this.elements.headAvatar=t.find("#headAvatar"),this.elements.tagsWrap=t.find("#tagsWrap")},partialRender:function(t){this.elements.nickName.text(t.nickName),this.elements.headAvatar.attr("src",t.headImg);var e="";for(var i in t.tags)e+="<span>"+t.tags[i]+"</span>";this.elements.tagsWrap.html(e)},defineEventInterface:function(){var t=this;Backbone.on("event:userProfileChanged",function(e){t.partialRender(e)})}});t.exports=r},function(t,e){t.exports='<div  class="fl avatorBg">\n	<img style="width: 100p; height: 100px;" id="headAvatar" src="{{bigheadImg}}" alt="">\n</div>\n<div class="fl anchorrMsg">\n	<h2>\n		<span id="nickName" class="fl name">{{nickName}}</span>\n		<span class="fl aPnum">主持直播：<i>{{anchor.liveCount}}</i>场</span>\n	</h2>\n	<p id="tagsWrap">\n		标签：\n		{{each anchor.tags as item}}\n			<span>{{item}}</span>\n		{{/each}}\n	</p>\n</div>'},function(t,e,i){"use strict";var n=i(11),s=i(76),a=i(22),o=a.sharedInstanceUserModel(),r=i(45),l=i(46),c=i(18),d=c.sharedInstanceIMModel(),h=n.extend({el:"#editProfile",rawLoader:function(){return i(77)},events:{"change #userAvatarForm":"submitFile","keyup .userInfoChanged":"verifyForm","click #btnSave":"saveuserinfo"},beforeMount:function(){this.userUpdateModel=new s},afterMount:function(){var t=this.$el;this.txtImg=$("#txtImg"),this.txtName=$("#txtName"),this.txtTags=$("#txtTags"),this.btnSave=$("#btnSave"),this.btnUploadAvatar=t.find("#btnUploadAvatar"),this.imgUserAvatar=$("#imgUserAvatar")},ready:function(){this.initUploadFile(),this.fetchIMUserInfo()},initForm:function(){var t=this;t.userInfo.smallAvatar&&(t.imgUserAvatar.attr("src",t.userInfo.smallAvatar),t.txtImg.val(t.userInfo.smallAvatar)),t.txtName.val(t.userInfo.nickName);var e=t.userInfo.anchor.tags.join(",")||"";t.txtTags.val(e)},fetchIMUserInfo:function(){var t=this;d.fetchIMUserSig(function(e){t.userInfo=e,t.initForm()})},verifyForm:function(){var t=$.trim(this.txtName.val()),e=/^[0-9A-Za-z\u4e00-\u9fa5]{1,15}$/g,i=$.trim(this.txtTags.val());if(this.btnSave.addClass("m_disabled"),!t||0==t.length)return l.showTip("请输入您的昵称"),!1;if(t.length>30)return l.showTip("昵称长度不能超过15个字!"),!1;if(!e.test(t))return l.showTip("昵称允许包含:中文,数字以及字母!"),!1;i=i.split(/[,，]/);for(var n=[],s=!1,a="",o=i.length;o>=0;o--)a=$.trim(i[o]),a.length>=1&&n.push(a),a.length>5&&(s=!0);return i=n,i&&0!=i.length?s?(l.showTip("每个标签最多5个字,请检查您的标签!"),!1):i.length>5?(l.showTip("您最多输入5个标签,请删掉一些标签"),!1):!this.txtImg.val()||this.txtImg.val().length<=0?(l.showTip("请上传头像图片"),!1):(this.btnSave.removeClass("m_disabled"),!0):(l.showTip("请输入至少一个标签,多个标签请用逗号分隔!"),!1)},tagsFilter:function(t){t=t.split(/[,，]/);for(var e=[],i="",n=t.length;n>=0;n--)i=$.trim(t[n]),i.length>=1&&e.push(i);return e},initUploadFile:function(){var t={cmd:[{saveOriginal:1,op:"save",plan:"avatar",belongId:"20634338",srcImg:"img"}],redirect:"http://"+window.location.host+"/cross-url/upload.html"},e=this;e.upload=r.classInstanceUploadFile({el:$("#userAvatarForm"),url:"http://image.yinyuetai.com/edit",data:t,filename:"img",className:"file",success:function(t){e.changeUploadBtnStatus(),e.fileUploaded(t)},failure:function(){e.changeUploadBtnStatus(),l.showError("上传失败")}})},changeUploadBtnStatus:function(t){t?(this.btnUploadAvatar.parent().addClass("m_disabled"),this.btnUploadAvatar.text("正在上传")):(this.btnUploadAvatar.parent().removeClass("m_disabled"),this.btnUploadAvatar.text("重新上传"))},submitFile:function(){var t=this.btnUploadAvatar.parent();t.hasClass("m_disabled")||(this.changeUploadBtnStatus(!0),this.upload.submit())},fileUploaded:function(t){var e=this.upload.parseErrorMsg(t);if(1==e){var i=t.images[0].path;this.txtImg.val(i),this.imgUserAvatar.attr("src",i),this.verifyForm()}else l.showTip(e)},saveuserinfo:function(){var t=this;if(t.isChanged()&&this.verifyForm()){t.btnSave.text("保存中");var e={deviceinfo:'{"aid": "30001001"}',access_token:"web-"+o.getToken(),nickname:$.trim(t.txtName.val()),headImg:t.txtImg.val(),tags:t.tagsFilter(t.txtTags.val()).join(",")};this.userUpdateModel.executeJSONP(e,function(e){t.btnSave.text("保存"),e&&"0"===e.code?(l.showOK("数据保存成功!"),d.updateIMUserSig(),t.fetchIMUserInfo(),Backbone.trigger("event:userProfileChanged",{nickName:$.trim(t.txtName.val()),headImg:t.txtImg.val(),tags:t.tagsFilter(t.txtTags.val())})):l.showError(e.msg||"数据保存失败,请稍后重试!")},function(e){l.showError("数据保存失败,请稍后重试!"),t.btnSave.text("保存")})}},isChanged:function(){var t=$.trim(this.txtName.val()),e=$.trim(this.txtTags.val()).replace(/[,，]/g,",");return t==this.userInfo.nickName&&e==this.userInfo.anchor.tags.join(",")&&this.txtImg.val()==this.userInfo.smallAvatar?(this.btnSave.addClass("m_disabled"),!1):!0}});t.exports=h},function(t,e,i){"use strict";var n=i(19),s=n.extend({url:"{{url_prefix}}/user/update.json?deviceinfo={{deviceinfo}}&access_token=web-{{accessToken}}&nickname={{nickname}}&headImg={{headImg}}&tags={{tags}}",beforeEmit:function(t){}});t.exports=s},function(t,e){t.exports='<ul>\n    <li class="uploadAvator">\n        <span class="fl PiTitle"><i>*</i>头像：</span>\n        <div class="fl">\n            <img id="imgUserAvatar" data-src="../img/personInfo-uploadBg.png" src="../img/personInfo-uploadBg.png"\n                 alt="" class="fl avatorNow">\n            <div class="uploadform fl">\n                <!-- <form id="ieditAvatar" class="upload-form"></form> -->\n                <!-- <input type="file" name="" class="file"> -->\n                <div class="">\n                    <span id="btnUploadAvatar">上传图片</span>\n                    <form id="userAvatarForm" class="upload-form"></form>\n                </div>\n                <p>支持5M以内的gif、jpg、jpeg、png图片上传</p>\n            </div>\n            <input id="txtImg" type="hidden" value="">\n        </div>\n    </li>\n    <li class="Inp_Pc_name">\n        <span class="fl PiTitle"><i>*</i>昵称：</span>\n        <div class="fl">\n            <input id="txtName" placeholder="昵称" class="userInfoChanged" maxlength="30" type="text">\n            <span style="display: none;" class="tips"><img src="../img/1.jpg" alt="">你的名字里有敏感词，请重新输入 </span>\n        </div>\n    </li>\n    <li class="tags">\n        <span class="fl PiTitle"><i>*</i>标签：</span>\n        <div class="fl">\n            <input id="txtTags" class="userInfoChanged" type="text" placeholder="(多个标签中间请用逗号隔开)">\n            <!--<br>-->\n            <!--<input type="text">-->\n            <!--<br>-->\n            <!--<input type="text">-->\n            <!--<br>-->\n            <!--<input type="text">-->\n            <!--<br>-->\n            <!--<input type="text">-->\n            <!--<br>-->\n            <!--<input type="text">-->\n            <!--<br>-->\n            <div class="light-color">多个标签中间请用逗号隔开,每个标签最多5个字,最多拥有5个标签.</div>\n        </div>\n    </li>\n    <li id="btnSave" class="save m_disabled">保存</li>\n</ul>\n'},function(t,e,i){"use strict";var n=i(11),s=i(79),a=i(28),o=i(46),r=i(21),l=n.extend({el:"#updatePassword",rawLoader:function(){return i(80)},events:{"click #btnPwdSave":"updatePwd","keyup #txtConfirmPwd":"changeBtnStatus","keyup #txtNewPwd":"checkNewPwd"},beforeMount:function(){this.updatePwdModel=new s},afterMount:function(){var t=this.$el;this.txtOldPwd=t.find("#txtOldPwd"),this.txtNewPwd=t.find("#txtNewPwd"),this.txtConfirmPwd=t.find("#txtConfirmPwd"),this.btnPwdSave=t.find("#btnPwdSave"),this.tipPwdErr=t.find("#tipPwdErr"),this.formPwd=t.find("#formPwd")},ready:function(){},verifyForm:function(){var t=this.txtOldPwd.val();if(!t||t.length<=0)return o.showTip("请输入您当前的密码"),!1;var e=this.txtNewPwd.val(),i=/[\S]{4,20}/;if(!e||e.length<=0)return o.showTip("请输入新的密码"),!1;if(e==t)return o.showTip("新密码不能跟旧密码一致"),!1;if(!i.test(e))return o.showTip("密码的长度建议4~20位,允许输入字母、数字、符号"),!1;var n=this.txtConfirmPwd.val();return e!=n?(o.showTip("2次输入的新密码不一致!"),!1):!0},changeBtnStatus:function(){var t=this.txtNewPwd.val(),e=this.txtConfirmPwd.val();t!=e?this.btnPwdSave.addClass("m_disabled"):this.btnPwdSave.removeClass("m_disabled")},updatePwd:function(){var t=this;return t.verifyForm()?(this.btnPwdSave.text("保存中"),this.initAjaxForm(),void this.formPwd.submit()):null},checkNewPwd:function(){var t=this.txtOldPwd.val(),e=this.txtNewPwd.val();t===e?this.tipPwdErr.show():this.tipPwdErr.hide()},resetInput:function(){this.formPwd.find("input").val("")},initAjaxForm:function(){var t=this;this.pwdAjaxForm=a.classInstanceAjaxForm($("#formPwd"),{success:function(e){var i=this.contentWindow,n=(i.location,decodeURIComponent(i.location.search)),s=r.parseSearch(n);s=s.json,s&&1==s.error?o.showError(s.message):(t.resetInput(),o.showOK("密码修改成功!")),t.btnPwdSave.text("保存")},failure:function(e){o.showError("密码修改失败!"),t.btnPwdSave.text("保存")}}),this.pwdAjaxForm.setIframeState(!0)}});t.exports=l},function(t,e){"use strict";function i(){}i.prototype.save=function(t,e,i){$.ajax("http://i.yinyuetai.com/i/profile/update-password",{method:"POST",data:t,success:function(t){e&&e(t)},error:function(t){i&&i(t)}})},t.exports=i},function(t,e){t.exports='<form id="formPwd" action="http://i.yinyuetai.com/i/profile/update-password" method="post">\n    <ul>\n        <li class="Inp_Pc_name">\n            <span class="fl PiTitle"><i>*</i>旧密码：</span>\n            <div class="fl">\n                <input id="txtOldPwd" name="oldPassword" placeholder="请输入旧密码" type="password">\n            </div>\n        </li>\n        <li class="Inp_Pc_name">\n            <span class="fl PiTitle"><i>*</i>新密码：</span>\n            <div class="fl">\n                <input id="txtNewPwd" name="newPassword" placeholder="请输入新密码" type="password"><span id="tipPwdErr" style="display: none;color:red; padding-left: 5px;">新密码不能跟旧密码一致</span>\n            </div>\n        </li>\n        <li class="Inp_Pc_name">\n            <span class="fl PiTitle"><i>*</i>确认新密码：</span>\n            <div class="fl">\n                <input id="txtConfirmPwd" name="newPasswordRepeat" placeholder="请再次输入新密码" type="password">\n            </div>\n        </li>\n        <li class="save m_disabled" id="btnPwdSave">\n            保存\n        </li>\n    </ul>\n</form>\n'},function(t,e,i){"use strict";var n=i(11),s=i(82),a=i(86),o=i(95),r=i(36),l=i(20),c=i(21),d=n.extend({el:"#pageContent",rawLoader:function(){return i(98)},events:{"click #tab-menu-ctrl>li":"menuChanged","click #liveState>li":"liveStateChanged","click #profileSate>li":"profileStateChanged"},beforeMount:function(){},afterMount:function(){this.noListDOM=this.$el.find("#noOpenListLive"),this.historyDOM=this.$el.find("#historyListLive"),this.liveStateDOMS=this.$el.find("#liveState>li"),this.editProfileDOM=this.$el.find("#editProfile"),this.accountSettingsDOM=this.$el.find("#accountSettings"),this.profileStateDOMS=this.$el.find("#profileSate>li"),this.updatePasswordDom=this.$el.find("#updatePassword")},ready:function(){this.createLiveView=new s,this.noopenListView=new a,this.historyListView=new o;var t=c.parse(window.location.href).query.view||"";this.changeView(t)},menuChanged:function(t){var e=$(t.target);"SPAN"==t.target.tagName&&(e=e.parent()),e&&("signout"===e.attr("data-panel")?r.show({content:"是否退出",okFn:function(){l.remove("imSig"),l.set("signout",1),window.location.href="/web/login.html"}}):(e.parent().children("li").removeClass("on"),e.addClass("on"),$(".tab-panel").hide(),$("#"+e.attr("data-panel")).show()))},liveStateChanged:function(t){var e=$(t.currentTarget),i=e.data("state");this.liveStateDOMS.removeClass("on"),e.addClass("on"),~~i?(this.noListDOM.hide(),this.historyDOM.show()):(this.historyDOM.hide(),this.noListDOM.show())},profileStateChanged:function(t){var e=$(t.currentTarget),i=e.data("state");this.profileStateDOMS.removeClass("on"),e.addClass("on"),~~i?(this.editProfileDOM.hide(),this.updatePasswordDom.show()):(this.editProfileDOM.show(),this.updatePasswordDom.hide())},changeView:function(t){"history"==t&&this.liveStateChanged({currentTarget:$(".myLiveControls").find('[data-state="1"]')})}});t.exports=d},function(t,e,i){"use strict";var n,s=i(11),a=i(52),o=i(22),r=o.sharedInstanceUserModel(),l=i(83),c=i(84),d=i(46),h=s.extend({el:"#createLiveVideo",rawLoader:function(){return i(85)},events:{"click #createVideo":"createVideoHandler","click .select":"dateTimeToggle","click .selectDate li":"selectDateHandler","keyup #inputActorName":"actorNameHandler","blur #inputActorName":"actorNameBlurHandler","click #selectorActor li":"selectorActorHandler","change #inputActorName":""},beforeMount:function(){this.actorName=null,this.videoName=null,this.createClick=!1,this.createLock=!0,this.dateTime=new a,this.mapKey=["year","month","day","hours","minutes"],this.createData={deviceinfo:'{"aid":"30001001"}',roomName:"",roomDesc:"",artistId:"",artistName:"",liveTime:0,access_token:"web-"+r.getToken()},this.createDate={}},afterMount:function(){this.selectorActor=this.$el.find("#selectorActor"),this.actorTemp=this.$el.find("#selectorActorTemp").html(),this.createVideo=this.$el.find("#createVideo"),this.actorName=this.$el.find("#inputActorName"),this.videoName=this.$el.find("#liveVideoName"),this.liveTime=this.$el.find("#liveTime"),this.liveTimeTemp=this.$el.find("#liveTimeTemp").html(),this.cellsTemp=this.$el.find("#cellsTemp").html(),this.hours=this.compileHTML(this.cellsTemp,{cells:this.eachMost(0,23)}),this.minutes=this.compileHTML(this.cellsTemp,{cells:this.eachMost(0,59)})},ready:function(){this.artistModel=new c,this.createModel=new l,this.initRender(),this.initListener()},initRender:function(){var t=this.dateDataStructure(),e=this.compileHTML(this.liveTimeTemp,{items:t});this.liveTime.html(e),this.liveTimeUl=this.liveTime.find(".select>ul"),this.liveTimeSpan=this.liveTime.find(".date"),this.liveLength=this.liveTimeUl.length-1},initListener:function(){var t=this;n=setInterval(function(){var e=t.actorName.val(),i=t.videoName.val();e&&i?(t.createVideo.removeClass("m_disabled"),t.createClick=!0):(e||i)&&(t.createVideo.addClass("m_disabled"),t.createClick=!1)},0)},dateDataStructure:function(){for(var t=[],e=0,i=this.mapKey.length;i>e;e++){var n=this.mapKey[e],s={tag:n,cur:this.dateTime.$get(n),style:""};switch(this.createDate[n]=s.cur,n){case"year":s.cells=this.dateTime.ceilYear(0),s.name="年";break;case"month":s.cells=this.dateTime.downMonth(),s.name="月";break;case"day":s.cells=this.dateTime.downDay(),s.name="日",s.division=!0;break;case"hours":s.style="margin-left: 68px;",s.cells=this.dateTime.downHours(),s.name="时";break;default:s.cells=this.dateTime.downMinutes(),s.name="分"}t.push(s)}return t},dateTimeToggle:function(t){t.stopPropagation();var e=$(t.currentTarget),i=~~e.data("index"),n=$(this.liveTimeUl[i]);n.toggle()},selectDateHandler:function(t){var e=$(t.currentTarget),i=e.text(),n=e.parent(),s=~~n.data("index"),a=n.data("tag"),o=$(this.liveTimeSpan[s]),r=o.text();if(r!==i){i=~~i,o.text(i),this.createDate[a]=i;var l,c,d,h,u=s+1,p=1,m=0;for("month"===a&&i===this.dateTime.$get("month")&&(this.dateTime.setCurNewDate(),d=!0);u<=this.liveLength;u++){var f=$(this.liveTimeUl[u]),v=$(this.liveTimeSpan[u]),g=f.data("tag");if(h=null,d)h=this.dateTime.down(g),l=this.compileHTML(this.cellsTemp,{cells:h}),v.text(h[0]),f.html(l);else switch(g){case"day":c=this.dateTime.getCountDays(i),l=this.compileHTML(this.cellsTemp,{cells:this.eachMost(1,c)}),v.text(p),f.html(l);break;case"hours":f.html(this.hours),v.text(m);break;default:f.html(this.minutes),v.text(m)}}}},eachMost:function(t,e){for(var i=[];e>=t;t++)i.push(t);return i},actorNameHandler:function(t){var e=$(t.currentTarget),i=$.trim(e.val());if(!i)return void this.selectorActor.empty();var n=this;this.artistModel.executeJSONP({keyword:i,deviceinfo:'{"aid":"30001001"}'},function(t){var e=t.data.list;n.selectorActor.html(n.compileHTML(n.actorTemp,{items:e})),n.selectorActor.show()},function(t){d.showError("输入有误")})},actorNameBlurHandler:function(t){},selectorActorHandler:function(t){var e=$(t.currentTarget),i=e.text();this.createData.artistId=~~e.attr("data-id"),this.actorName.val(i),this.selectorActor.hide()},createVideoHandler:function(t){var e=this;if(this.createClick&&this.createLock){clearInterval(n);var i=new Date,s=i.getTime()+36e5;if(this.createLock=!1,this.createData.roomName=this.videoName.val(),this.createData.artistName=this.actorName.val(),this.createData.liveTime=this.dateTime.getTime(this.createDate),this.createData.liveTime<s)return d.showError("直播时间至少为一小时之后"),this.createLock=!0,void e.initListener();this.createModel.executeJSONP(this.createData,function(t){var i=~~t.code;t.data;i?(d.showError(t.msg),e.createLock=!0,e.initListener()):(d.showOK("创建成功"),window.location.reload())},function(t){d.showError("创建失败"),e.createLock=!0,e.initListener()})}}});t.exports=h},function(t,e,i){"use strict";var n=i(19),s=n.extend({url:"{{url_prefix}}/room/create.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&roomName={{roomName}}&roomDesc={{roomDesc}}&artistId={{artistId}}&liveTime={{liveTime}}",beforeEmit:function(t){}});t.exports=s},function(t,e,i){"use strict";var n=i(19),s=n.extend({url:"{{url_prefix}}/search/artist_autocomplete.json?deviceinfo={{deviceinfo}}&keyword={{keyword}}&offset=100",beforeEmit:function(t){}});t.exports=s},function(t,e){t.exports='<ul>\n	<li class="Inp_name">\n		<span>*</span>直播名称：\n		<input type="text" maxlength="15" placeholder="输入直播名" id="liveVideoName"><i style="margin-left: 16px;">限15个字以内</i>\n	</li>\n	<li class="Inp_artist">\n		<span>*</span>选择艺人：\n		<input type="text" placeholder="输入文字" id="inputActorName">\n		<ul id="selectorActor">\n			 <script type="text/html" id="selectorActorTemp">\n				{{each items as item}}\n				      <li data-id="{{item[0]}}">{{item[1]}}</li>\n				{{/each}}\n			 </script>\n		</ul>\n	</li>\n	<li class="Inp_time">\n		<div class="tit"><span class="redX">*</span>直播时间：</div>\n		<div id="liveTime">\n			<script type="text/html" id="liveTimeTemp">\n				{{each items as item i}}\n					<div class="select" style="{{item.style}}" data-index="{{i}}">\n						<span class="date">{{item.cur}}</span>\n						<img src="../img/select-ico.jpg" alt="">\n						<ul class="selectDate" data-index="{{i}}" data-tag="{{item.tag}}">\n							{{each item.cells as cell}}\n								<li>{{cell}}</li>\n							{{/each}}\n						</ul>\n					</div>\n					<em>{{item.name}}</em>\n					{{if item.division}}\n						<br/>\n					{{/if}}\n				{{/each}}\n			</script>\n			<script type="text/html" id="cellsTemp">\n				{{each cells as cell}}\n					<li>{{cell}}</li>\n				{{/each}}\n			</script>\n		</div>\n\n	</li>\n	<div class="submit m_disabled" id="createVideo">创建</div>\n</ul>\n'},function(t,e,i){"use strict";var n=i(11),s=i(87),a=i(88),o=i(89),r=i(90),l=i(91),c=i(46),d=i(36),h=i(22),u=i(42),p=i(52),m=h.sharedInstanceUserModel(),f=new p,v=n.extend({el:"#noOpenContent",events:{"click li":"checkLiveVideoHandler","click .uploadImage":"editCoverImageHandler","click .copy-video-url":"copyUrlHandler","click .copy-video-name":"copyNameHandler"},rawLoader:function(){},beforeMount:function(){var t=m.getToken();this.listTemp=i(93),this.liTemp=i(94),this.noOpenParameter={deviceinfo:'{"aid":"30001001"}',order:"time",offset:0,size:6,access_token:"web-"+t},this.removeParameter={deviceinfo:'{"aid":"30001001"}',roomId:"",access_token:"web-"+t},this.releaseParameter={deviceinfo:'{"aid":"30001001"}',
roomId:"",access_token:"web-"+t},this.saveCoverParameter={deviceinfo:'{"aid":"30001001"}',access_token:"web-"+t,roomId:"",posterUrl:""},this.removeLock=!0,this.releaseLock=!0,this.liCache=null,this.imagePath="",this.upload=null,this.singleLiDOM=null,this.uploadState=!1,this.noOpenModel=new s,this.releaseModel=new a,this.removeModel=new o,this.saveCoverModel=new r},afterMount:function(){},ready:function(){var t=this,e={width:580,height:341,isRemoveAfterHide:!1,isAutoShow:!1,mainClass:"shadow_screen_x",closeClass:"editor_bg_close_x",closeText:"X",title:"封面设置",ctrlData:{cmd:[{saveOriginal:1,op:"save",plan:"avatar",belongId:"20634338",srcImg:"img"}],redirect:"http://"+window.location.host+"/cross-url/upload.html"},uploadFileSuccess:function(e){t.uploadImageHandler(e),t.uploadState=!0},saveFile:function(){t.uploadState?t.saveCoverImage():c.showTip("正在上传，请等待")}};this.upload=new u(e),this.noOpenModel.executeJSONP(this.noOpenParameter,function(e){var i=e.data,n=i.roomList,s=Math.ceil(i.totalCount/t.noOpenParameter.size);s>1&&t.initPageBox({offset:t.noOpenParameter.offset,size:t.noOpenParameter.size,count:s}),t.initRender(n)},function(){c.showError("获取未直播列表：第1页失败")})},initPageBox:function(t){var e=this;this.pageBoxView=new l({id:"#noOpenPageBox",props:t,listModel:this.noOpenModel,listRender:function(t){var i=t.data,n=i.roomList;e.initRender(n)}})},initRender:function(t){var e="";e=t.length?this.compileHTML(this.listTemp,{items:t}):"<h1>暂无数据</h1>",this.$el.html(e),this.liCache=null,this.liCache={};for(var i=this.$el.find("li"),n=0,s=i.length;s>n;n++){var a=$(i[n]),o=a.attr("data-key");this.liCache[o]=a}},checkLiveVideoHandler:function(t){var e=this,i=$(t.currentTarget),n=$(t.target),s=n.data("state"),a=i.attr("data-id"),o=n.parents("li").attr("data-img");switch(s){case 2:e.publishLiveShow(a,n,o);break;case 3:this.removeLock&&d.show({content:"是否确认删除",okFn:function(){e.removeLock=!1,e.removeParameter.roomId=a,e.removeModel.executeJSONP(e.removeParameter,function(){e.removeLock=!0,c.showOK("删除成功"),i.remove()},function(t){e.removeLock=!0,c.showError("删除失败")})}})}},isTooLate:function(t){var e=new Date,i=t-e.getTime(),n=Number(p.difference(Math.abs(i)).hours);return 0>i&&n>=1},publishLiveShow:function(t,e,i){var n=this,s=e.parents("li").attr("data-liveTime");if("disable"!==e.attr("class"))return n.isTooLate(s)?(c.showTip("您已经迟到超过一小时，无法再进行本场直播了"),null):void(this.releaseLock&&i?(this.releaseLock=!1,this.releaseParameter.roomId=t,this.releaseModel.executeJSONP(this.releaseParameter,function(t){n.releaseLock=!0,e.addClass("disable"),c.showOK("发布成功");var i=t.data;i.liCacheKey=i.id+"-"+i.streamName,i.liveVideoTime=n.forMatterDate(i.liveTime),i.lookUrl="/web/anchor.html?roomId="+i.id,n.liRender(i)},function(t){n.releaseLock=!0,c.showError("发布失败")})):c.showError("发布失败，请上传封面"))},editCoverImageHandler:function(t){var e=$(t.currentTarget),i=null,n=e.attr("data-posterpic");if(this.upload){if(this.currentLiveItem=$(e.parents("li")),this.singleLiDOM=e.parent(),this.saveCoverParameter.roomId=this.singleLiDOM.data("id"),this.upload.emptyValue(),n){var s=e.find(".cover-image");i={breviaryUrl:s.attr("src"),inputText:"编辑图片"}}this.upload.show(i)}},uploadImageHandler:function(t){var e=this.upload.parseErrorMsg(t);if(1==e){var i=t.images;this.imagePath=i[0].path,this.currentLiveItem&&this.currentLiveItem.attr("data-img",i[0].path||"")}else c.showTip(e)},saveCoverImage:function(){var t=this;this.saveCoverParameter.posterUrl=this.imagePath,this.saveCoverModel.executeJSONP(this.saveCoverParameter,function(e){var i=~~e.code;if(!i){var n=t.singleLiDOM.find(".cover-image");n.attr("src",t.imagePath),t.singleLiDOM=null,c.showOK("保存成功"),t.upload.hide(),t.uploadState=!1}},function(t){c.showError("保存失败")})},forMatterDate:function(t){f.setCurNewDate(t);var e=f.$get("year"),i=f.$get("month"),n=f.$get("day"),s=f.$get("hours"),a=10>s?"0"+s:s,o=f.$get("minutes"),r=10>o?"0"+o:o;return e+"/"+i+"/"+n+" "+a+":"+r},liRender:function(t){var e=this.compileHTML(this.liTemp,{item:t}),i=this.liCache[t.liCacheKey];i.html(e)},copyUrlHandler:function(t){t.preventDefault();var e=$(t.currentTarget),i=e.attr("data-value");return i.length?void this.clipboard(i):void c.showTip("开启直播后生成视频地址")},copyNameHandler:function(t){t.preventDefault();var e=$(t.currentTarget),i=e.attr("data-value");this.clipboard(i)},clipboard:function(t){window.clipboardData?(window.clipboardData.clearData("text"),window.clipboardData.setData("text",t),c.showOK("复制成功")):c.showTip("你浏览器的js不支持剪贴板，无法调用")}});t.exports=v},function(t,e,i){"use strict";var n=i(19),s=i(52),a=new s,o=n.extend({url:"{{url_prefix}}/room/no_open_list.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&order={{order}}&offset={{offset}}&size={{size}}",beforeEmit:function(t){},formatter:function(t){var e=~~t.code;if(e)return t;for(var i=t.data,n=i.roomList,s=n.length;s--;){var o=n[s],r=o.liveTime;a.setCurNewDate(r);var l=a.$get("year"),c=a.$get("month"),d=a.$get("day"),h=a.$get("hours"),u=10>h?"0"+h:h,p=a.$get("minutes"),m=10>p?"0"+p:p;o.liveVideoTime=l+"/"+c+"/"+d+" "+u+":"+m,o.lookUrl="/web/anchor.html?roomId="+o.id,o.liCacheKey=o.id+"-"+o.streamName}return t}}),r=null;o.sharedInstanceNoOpenListModel=function(){return r||(r=new o),r},t.exports=o},function(t,e,i){"use strict";var n=i(19),s=n.extend({url:"{{url_prefix}}/room/show.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&roomId={{roomId}}",beforeEmit:function(t){}});t.exports=s},function(t,e,i){"use strict";var n=i(19),s=n.extend({url:"{{url_prefix}}/room/del.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&roomId={{roomId}}",beforeEmit:function(t){}});t.exports=s},function(t,e,i){"use strict";var n=i(19),s=n.extend({url:"{{url_prefix}}/room/pp_set.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&roomId={{roomId}}&posterUrl={{posterUrl}}",beforeEmit:function(t){}});t.exports=s},function(t,e,i){"use strict";var n='{{each items as item i}}<span class="{{if item == num }}now{{/if}}" data-page="{{item}}" data-indice="{{i}}">{{item}}</span>{{/each}}',s=i(11),a=i(22),o=i(46),r=a.sharedInstanceUserModel(),l=s.extend({clientRender:!1,events:{"click .pre":"preHandler","click .next":"nextHandler","click #nav span":"pageboxHandler"},beforeMount:function(){var t=this._ICEOptions.props;this.boxTemp=i(92),this.count=t.count,this.offset=t.offset||0,this.size=t.size,this.sectionBase=t.sectionBase||3,this.listModel=this._ICEOptions.listModel,this.listRender=this._ICEOptions.listRender,this.modelParameter={deviceinfo:'{"aid":"30001001"}',order:"",offset:0,size:this.size,access_token:"web-"+r.getToken()},this.omit=this.count>2,this.items=[];for(var e=0;e<this.count;e++)this.items.push(e+1);this.lock=!0,this.translation=0},afterMount:function(){},ready:function(){this._ICEinitEvent(),this.initRender(),this.pageChanged(),this.initEvent()},initRender:function(){var t=this.items.concat();this.omit&&(t=t.splice(0,3));var e={count:this.count,omit:this.omit,items:t,preOmit:this.preOmit},i=this.compileHTML(this.boxTemp,e);this.$el.html(i),this.howPage=this.$el.find("#howPage"),this.nav=this.$el.find("#nav"),this.tipPreOmit=this.$el.find("#tipPreOmit"),this.tipOmit=this.$el.find("#tipOmit")},preHandler:function(t){var e=$(t.currentTarget);if(this.offset<=0)return void o.showTip("原因：已经翻到最前一页");var i=e.attr("data-state");this.initRequest(i)},nextHandler:function(t){var e=$(t.currentTarget);if(this.offset===this.count-1)return void o.showTip("原因：已经翻到最后一页");var i=e.attr("data-state");this.initRequest(i)},pageboxHandler:function(t){var e=$(t.currentTarget);if(e.attr("data-page")){var i=~~e.attr("data-page");if(i-1!==this.offset){var n=this.nav.find("span");n.removeClass("now"),e.addClass("now");var s=~~e.text();this.offset=s-1,this.translation=~~e.attr("data-indice"),this.openRequest()}}},initRequest:function(t){switch(t){case"1":0!==this.offset&&(this.offset--,this.sectionLogic(0));break;case"2":this.offset<=this.count-2&&(this.offset++,this.sectionLogic(1))}this.openRequest()},openRequest:function(){var t=this;this.lock&&(this.lock=!1,this.modelParameter.offset=(this.offset||0)*this.size,this.listModel.executeJSONP(this.modelParameter,function(e,i){t.lock=!0;var n=~~e.code;return n?void o.showError(e.msg):void t.listRender(e)},function(e){t.lock=!0,0!==t.offset&&t.offset--}))},sectionLogic:function(t){var e=this.sectionBase-1,i=this.offset+e,n=this.items.concat(),s=n[i];if(s<=n[n.length-1])this.translation=0,n=n.splice(this.offset,this.sectionBase),this.sectionRender(n,n[0]);else{if(!s){var a=this.offset?this.offset-1:this.offset;this.offset>this.count-2&&a&&--a;var o=n.splice(a,this.sectionBase);return this.translation=0,void this.sectionRender(o,this.offset+1)}if(this.translation>e)return;t?this.translation++:this.translation--,this.spans.removeClass("now");var r=this.spans[this.translation];$(r).addClass("now")}},sectionRender:function(t,e){var i=this.compileHTML(n,{items:t,num:e,preOmit:this.preOmit,omit:this.omit});this.nav.html(i),this.spans=this.nav.find("span"),Backbone.trigger(this.cid+"event:listPageChanged")},pageChanged:function(){var t=this;t.offset>2?this.tipPreOmit.show():this.tipPreOmit.hide(),t.count<4||t.offset+3>=t.count?this.tipOmit.hide():this.tipOmit.show()},initEvent:function(){var t=this;Backbone.on(this.cid+"event:listPageChanged",function(e){t.pageChanged(e)})}});t.exports=l},function(t,e){t.exports='<span class="pre" data-state="1">&lt;</span>\n<span id=\'tipPreOmit\' style="display: none;" class="disabled">...</span>\n<div class="fl">\n	<div id="nav">\n		{{each items as item i}}\n			<span class="{{if i === 0}}now{{/if}}" data-page="{{item}}" data-indice="{{i}}">{{item}}</span>\n		{{/each}}\n	</div>\n</div>\n<!-- {{if omit}} -->\n<span id=\'tipOmit\' class="disabled" style="display: none;">...</span>\n<!-- {{/if}} -->\n<span class="next" data-state="2">&gt;</span>\n<p>共<i id="howPage">{{count}}</i>页</p>\n'},function(t,e){t.exports='{{each items as item}}\n     <li  data-id="{{item.id}}" data-key="{{item.liCacheKey}}" data-img="{{item.posterPic}}" data-liveTime="{{item.liveTime}}">\n            <div class="uploadAd fl uploadImage" data-posterPic="{{if item.posterPic}}1{{/if}}">\n                   <img src="{{item.posterPic || \'../img/aP-list-ad.jpg\'}}" alt="" class="cover-image">\n            </div>\n            <dl class="preLiveMsg fl">\n                   <dt>{{item.roomName}}</dt>\n                   <dd>直播时间：<span>{{item.liveVideoTime}}</span></dd>\n                   <dd>\n                        <h4 class="tit">视频连接：</h4>\n                        <div>\n                                <span>{{item.livePushStreamUrl}}</span>\n                                <a href="" class="copy copy-video-url" data-value="{{item.livePushStreamUrl}}">复制</a>\n                        </div>\n                   <dd>\n                        <h4 class="tit">视频流：</h4>\n                        <div>\n                              <span>{{item.streamName}}</span>\n                              <a href="" class="copy copy-video-name" data-value="{{item.streamName}}">复制</a>\n                        </div>\n                  </dd>\n                   <dd class="ctl">\n                        <a href="{{item.lookUrl}}">查看</a>\n                        {{if item.status === 1}}\n                        	<span class="disable" data-state="2">已发布</span>\n                        {{else if item.status === 2}}\n                            <span class="disable">直播中</span>\n                        {{else }}\n                        	{{if item.status === 0}}\n                        		<span  data-state="2">发布</span>\n					        {{/if}}\n                        {{/if}}\n                        {{if item.status === 0}}\n                            <span data-state="3">删除</span>\n                        {{/if}}\n                   </dd>\n            </dl>\n     </li>\n{{/each}}\n'},function(t,e){t.exports='<div class="uploadAd fl uploadImage"data-posterPic="{{if item.posterPic}}1{{/if}}"  data-liveTime="{{item.liveTime}}">\n       <img src="{{item.posterPic|| \'../img/aP-list-ad.png\'}}" alt="" class="cover-image">\n</div>\n<dl class="preLiveMsg fl">\n       <dt>{{item.roomName}}</dt>\n       <dd>直播时间：<span>{{item.liveVideoTime}}</span></dd>\n       <dd>\n            <h4 class="tit">视频连接：</h4>\n            <div>\n                    <span>{{item.livePushStreamUrl}}</span>\n                    <a href="" class="copy copy-video-url" data-value="{{item.livePushStreamUrl}}">复制</a>\n            </div>\n       <dd>\n            <h4 class="tit">视频流：</h4>\n            <div>\n                  <span>{{item.streamName}}</span>\n                  <a href="" class="copy copy-video-name" data-value="{{item.streamName}}">复制</a>\n            </div>\n      </dd>\n       <dd class="ctl">\n            <a href="{{item.lookUrl}}">查看</a>\n            {{if item.status === 1}}\n            	<span class="disable" data-state="2">已发布</span>\n            {{else }}\n            	{{if item.status === 0}}\n            		<span  data-state="2">发布</span>\n			    {{/if}}\n            {{/if}}\n            {{if item.status === 0}}\n                <span data-state="3">删除</span>\n            {{/if}}\n       </dd>\n</dl>\n'},function(t,e,i){"use strict";var n=i(11),s=i(96),a=i(91),o=i(22),r=o.sharedInstanceUserModel(),l=n.extend({el:"#historyContent",events:{},rawLoader:function(){},beforeMount:function(){var t=r.getToken();this.listTemp=i(97),this.historyParameter={deviceinfo:'{"aid":"30001001"}',order:"time",offset:0,size:6,access_token:"web-"+t},this.historyModel=new s},afterMount:function(){},ready:function(){var t=this;this.historyModel.executeJSONP(this.historyParameter,function(e){var i=e.data,n=i.roomList||[],s=Math.ceil(i.totalCount/t.historyParameter.size);s>1&&t.initPageBox({offset:t.historyParameter.offset,size:t.historyParameter.size,count:s}),t.initRender(n)},function(t){})},initPageBox:function(t){var e=this;this.pageBoxView=new a({id:"#historyPageBox",props:t,listModel:this.historyModel,listRender:function(t){var i=t.data,n=i.roomList;e.initRender(n)}})},initRender:function(t){var e="";e=t.length?this.compileHTML(this.listTemp,{items:t}):"<h1>暂无数据</h1>",this.$el.html(e)}});t.exports=l},function(t,e,i){"use strict";var n=i(19),s=i(52),a=new s,o=n.extend({url:"{{url_prefix}}/room/end_list.json?deviceinfo={{deviceinfo}}&access_token=web-{{access_token}}&order={{order}}&offset={{offset}}&size={{size}}",beforeEmit:function(t){},formatter:function(t){var e=~~t.code;if(e)return t;for(var i=t.data,n=i.roomList,o=n.length;o--;){var r=n[o],l=s.difference(r.duration>0?r.duration:0);r.diff=l.hours+":"+l.minutes+":"+l.seconds;var c=r.liveTime;a.setCurNewDate(c);var d=a.$get("year"),h=a.$get("month"),u=a.$get("day"),p=a.$get("hours"),m=10>p?"0"+p:p,f=a.$get("minutes"),v=10>f?"0"+f:f;r.liveVideoTime=d+"/"+h+"/"+u+" "+m+":"+v}return t}});t.exports=o},function(t,e){t.exports='{{each items as item}}\n<li data-id="{{item.roomId}}">\n    <div class="uploadAd fl">\n        <a href="#">\n            <img src="{{item.posterPic}}" alt="">\n        </a>\n    </div>\n    <dl class="preLiveMsg fl">\n        <dt>{{item.roomName}}</dt>\n        <dd>\n            直播时间：<span class="date dark-color">{{item.liveVideoTime}}</span>\n            时长：<span class="dark-color">{{item.diff}}</span>\n        </dd>\n        <dd class="popularity">\n            <img src="../img/easy.png" alt="">\n            <span>{{item.seen}}</span>\n            <img src="../img/yun.png" alt="">\n            <span>{{item.bulletCurtain}}</span>\n            <img src="../img/love.png" alt="">\n            <span>{{item.assemble}}</span>\n        </dd>\n        <!--<dd class="popularity-wrap">-->\n            <!--<div class="progress-wrap border-radius">-->\n                <!--<div style="width: 45%;" class="progress border-radius"></div>-->\n            <!--</div>-->\n        <!--</dd>-->\n        <dd class="pop">人气：<span>{{item.popularity}}</span></dd>\n    </dl>\n</li>\n{{/each}}'},function(t,e){t.exports='<ul id="tab-menu-ctrl" class="subnav1 fl" style="height: inherit;">\n       <li data-panel="tab-my-live" class="on">我的直播<span>&gt;</span></li>\n       <li data-panel="createLiveVideo">创建直播<span>&gt;</span></li>\n       <li data-panel="tabSetting">个人设置<span>&gt;</span></li>\n       <li data-panel="signout">退出<span>&gt;</span></li>\n</ul>\n<div class="anPc-list fl tab-panel-wraper">\n       <div id="tab-my-live" class="tab-panel myLiveBox show">\n              <ol class="myLiveControls clearfix" id="liveState">\n                     <li class="fl on" data-state="0">未开播</li>\n                     <li class="fl"  data-state="1">历史直播</li>\n              </ol>\n              <div class="Mylive">\n                     <div class="preLive show" id="noOpenListLive">\n                            <ul id="noOpenContent"></ul>\n                            <div class="page">\n                            		<div class="PageBox" id="noOpenPageBox"></div>\n                            </div>\n                     </div>\n                     <div class="liveHistory" id="historyListLive">\n                            <ul id="historyContent"></ul>\n                            <div class="page">\n                            		<div class="PageBox" id="historyPageBox"></div>\n                            </div>\n                     </div>\n              </div>\n       </div>\n       <div  class="tab-panel creatLive" id="createLiveVideo">\n       </div>\n       <div  class="tab-panel setting" id="tabSetting">\n              <ol class="setContrl clearfix" id="profileSate">\n                     <li class="fl on" data-state="0">个人资料</li>\n                     <li class="fl" data-state="1">修改密码</li>\n              </ol>\n              <div class="set_Con">\n                     <div class="personInfo show" id="editProfile">\n\n                     </div>\n                     <div class="modifyPwd" id="updatePassword">\n\n                     </div>\n\n              </div>\n       </div>\n       <!-- <div class="signOut"></div> -->\n</div>\n'},function(t,e){t.exports='<!--编辑背景图片-->\n<div class="title">\n	<span class="editorBg_btn" id="editBgBtn">编辑背景</span>\n</div>\n<div class="contentBox">\n	<!--profile-->\n	<div class="anchorMsg_con clearfix" id="settingProfile"></div>\n	<!-- 页面主体部分 -->\n	<div class="content clearfix" id="pageContent"></div>\n</div>\n'},function(t,e){}]);