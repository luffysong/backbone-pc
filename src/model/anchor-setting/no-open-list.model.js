/**
 * @time {时间}
 * @author {编写者}
 * @info {实现的功能}
 */
var g = {
    "code": "0",
    "msg": "SUCCESS",
    "data": {
        "totalCount": 12,
        "roomList": [
            {
                "id": 27,
                "anchorId": 42474912,
                "artistId": 279,
                "streamName": "7d549713790b457d8816317563a85456",
                "imGroupid": "@TGS#3AK43QAEJ",
                "roomName": "鹿晗粉丝站",
                "desc": "鹿晗粉粉们聚集地，召集令开始了。",
                "status": 1,
                "imageUrl": "http://img1.yytcdn.com/others/mobile_front_page/160304/0/-M-4262fd00c7db36ad67ed1845816fb48e_0x0.jpg",
                "posterPic": "http://img1.yytcdn.com/others/mobile_front_page/160304/0/-M-4262fd00c7db36ad67ed1845816fb48e_0x0.jpg",
                "liveTime": 1457755200000,
                "startTime": 0,
                "endTime": 0,
                "duration": 0,
                "popularity": 0,
                "onlineMax": 0,
                "bulletCurtain": 0,
                "thrustStatus": 0,
                "createType": 0,
                "url": "http://yyt-live-space.kssws.ks-cdn.com/record/live/7d549713790b457d8816317563a85456/hls/7d549713790b457d8816317563a85456.m3u8",
                "artist": null,
                "creator": {
                    "uid": 42474912,
                    "nickName": "憤怒的小寶",
                    "smallAvatar": "http://img0.yytcdn.com/user/avatar/160310/42474912/-M-5e723d33e5fea2edc9c8e4a8d3c43d51_50x50.jpg",
                    "largeAvatar": "http://img0.yytcdn.com/user/avatar/160310/42474912/-M-5e723d33e5fea2edc9c8e4a8d3c43d51_100x100.jpg",
                    "vipLevel": 0,
                    "vipImg": null,
                    "tags": [
                        "小兵",
                        "小白"
                    ]
                }
            },
            {
                "id": 28,
                "anchorId": 42474912,
                "artistId": 279,
                "streamName": "7d549713790b457d8816317563a85456",
                "imGroupid": "@TGS#3AK43QAEJ",
                "roomName": "胡歌粉丝站",
                "desc": "胡歌粉粉们聚集地，召集令开始了。",
                "status": 1,
                "imageUrl": "http://img1.yytcdn.com/others/mobile_front_page/160304/0/-M-4262fd00c7db36ad67ed1845816fb48e_0x0.jpg",
                "posterPic": "http://img1.yytcdn.com/others/mobile_front_page/160304/0/-M-4262fd00c7db36ad67ed1845816fb48e_0x0.jpg",
                "liveTime": 1457755200000,
                "startTime": 0,
                "endTime": 0,
                "duration": 0,
                "popularity": 0,
                "onlineMax": 0,
                "bulletCurtain": 0,
                "thrustStatus": 0,
                "createType": 0,
                "url": "http://yyt-live-space.kssws.ks-cdn.com/record/live/7d549713790b457d8816317563a85456/hls/7d549713790b457d8816317563a85456.m3u8",
                "artist": null,
                "creator": {
                    "uid": 42474912,
                    "nickName": "憤怒的小寶",
                    "smallAvatar": "http://img0.yytcdn.com/user/avatar/160310/42474912/-M-5e723d33e5fea2edc9c8e4a8d3c43d51_50x50.jpg",
                    "largeAvatar": "http://img0.yytcdn.com/user/avatar/160310/42474912/-M-5e723d33e5fea2edc9c8e4a8d3c43d51_100x100.jpg",
                    "vipLevel": 0,
                    "vipImg": null,
                    "tags": [
                        "小兵",
                        "小白"
                    ]
                }
            },
            {
                "id": 29,
                "anchorId": 42474912,
                "artistId": 279,
                "streamName": "7d549713790b457d8816317563a85456",
                "imGroupid": "@TGS#3AK43QAEJ",
                "roomName": "鹿晗粉丝站",
                "desc": "鹿晗粉粉们聚集地，召集令开始了。",
                "status": 1,
                "imageUrl": "http://img1.yytcdn.com/others/mobile_front_page/160304/0/-M-4262fd00c7db36ad67ed1845816fb48e_0x0.jpg",
                "posterPic": "http://img1.yytcdn.com/others/mobile_front_page/160304/0/-M-4262fd00c7db36ad67ed1845816fb48e_0x0.jpg",
                "liveTime": 1457755200000,
                "startTime": 0,
                "endTime": 0,
                "duration": 0,
                "popularity": 0,
                "onlineMax": 0,
                "bulletCurtain": 0,
                "thrustStatus": 1,
                "createType": 1,
                "url": "http://yyt-live-space.kssws.ks-cdn.com/record/live/7d549713790b457d8816317563a85456/hls/7d549713790b457d8816317563a85456.m3u8",
                "artist": null,
                "creator": {
                    "uid": 42474912,
                    "nickName": "憤怒的小寶",
                    "smallAvatar": "http://img0.yytcdn.com/user/avatar/160310/42474912/-M-5e723d33e5fea2edc9c8e4a8d3c43d51_50x50.jpg",
                    "largeAvatar": "http://img0.yytcdn.com/user/avatar/160310/42474912/-M-5e723d33e5fea2edc9c8e4a8d3c43d51_100x100.jpg",
                    "vipLevel": 0,
                    "vipImg": null,
                    "tags": [
                        "小兵",
                        "小白"
                    ]
                }
            },
            {
                "id": 30,
                "anchorId": 42474912,
                "artistId": 279,
                "streamName": "7d549713790b457d8816317563a85456",
                "imGroupid": "@TGS#3AK43QAEJ",
                "roomName": "胡歌粉丝站",
                "desc": "胡歌粉粉们聚集地，召集令开始了。",
                "status": 0,
                "imageUrl": "http://img1.yytcdn.com/others/mobile_front_page/160304/0/-M-4262fd00c7db36ad67ed1845816fb48e_0x0.jpg",
                "posterPic": "http://img1.yytcdn.com/others/mobile_front_page/160304/0/-M-4262fd00c7db36ad67ed1845816fb48e_0x0.jpg",
                "liveTime": 1457755200000,
                "startTime": 0,
                "endTime": 0,
                "duration": 0,
                "popularity": 0,
                "onlineMax": 0,
                "bulletCurtain": 0,
                "thrustStatus": 1,
                "createType": 1,
                "url": "http://yyt-live-space.kssws.ks-cdn.com/record/live/7d549713790b457d8816317563a85456/hls/7d549713790b457d8816317563a85456.m3u8",
                "artist": null,
                "creator": {
                    "uid": 42474912,
                    "nickName": "憤怒的小寶",
                    "smallAvatar": "http://img0.yytcdn.com/user/avatar/160310/42474912/-M-5e723d33e5fea2edc9c8e4a8d3c43d51_50x50.jpg",
                    "largeAvatar": "http://img0.yytcdn.com/user/avatar/160310/42474912/-M-5e723d33e5fea2edc9c8e4a8d3c43d51_100x100.jpg",
                    "vipLevel": 0,
                    "vipImg": null,
                    "tags": [
                        "小兵",
                        "小白"
                    ]
                }
            }
        ]
    },
    "now": 1457766891050
}
'use strict';

var BaseModel = require('BaseModel');
var DateTime = require('DateTime');
var dateTime = new DateTime();
var Model = BaseModel.extend({
	url:'{{url_prefix}}/room/no_open_list.json?deviceinfo={"aid":"30001001"}&access_token=web-{{access_token}}&order={{order}}&offset={{offset}}&size={{size}}',//填写请求地址
	beforeEmit:function(options){
		// 如果需要开启对请求数据的本地缓存，可将下列两行注释去掉
		// this.storageCache = true; //开启本地缓存
		// this.expiration = 1; //设置缓存过期时间（1表示60*60*1000 一小时）
	},
	formatter:function(response){
		response = g;
		var code = ~~response.code;
		if (code) {
			return response;
		};
		var data = response.data;
		var roomList = data.roomList;
		var l = 	roomList.length;
		while(l--){
			var value = roomList[l];
			var liveTime = value.liveTime;
			dateTime.setCurNewDate(liveTime);
			var year = dateTime.$get('year');
			var month = dateTime.$get('month');
			var day = dateTime.$get('day');
			var _hours = dateTime.$get('hours');
			var hours = _hours < 10 ? '0'+_hours : _hours;
			var _minutes = dateTime.$get('minutes');
			var minutes = _minutes < 10 ? '0'+_minutes : _minutes;
			value.liveVideoTime = year+'/'+month+''+day+' '+hours+':'+minutes;
			value.lookUrl = '/web/anchor.html?roomId='+value.id;
		};
		return response;
	}
});
var shared = null;
Model.sharedInstanceNoOpenListModel = function(){
	if (!shared) {
		shared = new Model();
	};
	return shared;
};
module.exports = Model;